# `D:\src\scipysrc\sympy\sympy\liealgebras\type_e.py`

```
from .cartan_type import Standard_Cartan  # 导入标准 Cartan 类
from sympy.core.backend import eye, Rational  # 导入 eye 和 Rational 函数


class TypeE(Standard_Cartan):
    def __new__(cls, n):
        # 如果 n 不在范围 [6, 8] 内，抛出值错误异常
        if n < 6 or n > 8:
            raise ValueError("Invalid value of n")
        # 调用父类 Standard_Cartan 的构造函数，返回相应的 Cartan 类对象
        return Standard_Cartan.__new__(cls, "E", n)

    def dimension(self):
        """返回 Lie 代数底层向量空间 V 的维度

        示例
        ========

        >>> from sympy.liealgebras.cartan_type import CartanType
        >>> c = CartanType("E6")
        >>> c.dimension()
        8
        """
        return 8

    def basic_root(self, i, j):
        """
        生成具有第 i 位为 -1，第 j 位为 1 的根的方法
        """
        root = [0]*8  # 创建一个长度为 8 的零数组
        root[i] = -1  # 在第 i 位设置为 -1
        root[j] = 1   # 在第 j 位设置为 1
        return root

    def simple_root(self, i):
        """
        返回 E_n 的第 i 个简单根

        示例
        ========

        >>> from sympy.liealgebras.cartan_type import CartanType
        >>> c = CartanType("E6")
        >>> c.simple_root(2)
        [1, 1, 0, 0, 0, 0, 0, 0]
        """
        n = self.n  # 获取实例对象的属性 n
        if i == 1:
            root = [-0.5]*8  # 创建一个长度为 8，所有元素为 -0.5 的数组
            root[0] = 0.5     # 将第一个元素设为 0.5
            root[7] = 0.5     # 将最后一个元素设为 0.5
            return root
        elif i == 2:
            root = [0]*8   # 创建一个长度为 8 的零数组
            root[1] = 1    # 将第二个元素设为 1
            root[0] = 1    # 将第一个元素设为 1
            return root
        else:
            if i in (7, 8) and n == 6:
                raise ValueError("E6 only has six simple roots!")  # 抛出异常，E6 只有六个简单根
            if i == 8 and n == 7:
                raise ValueError("E7 has only 7 simple roots!")    # 抛出异常，E7 只有七个简单根

            return self.basic_root(i - 3, i - 2)  # 调用 basic_root 方法返回特定位置的基本根

    def roots(self):
        """
        返回 E_n 的总根数
        """
        n = self.n  # 获取实例对象的属性 n
        if n == 6:
            return 72  # 返回 E6 的根数
        if n == 7:
            return 126  # 返回 E7 的根数
        if n == 8:
            return 240  # 返回 E8 的根数
    def cartan_matrix(self):
        """
        Returns the Cartan matrix for G_2
        The Cartan matrix matrix for a Lie algebra is
        generated by assigning an ordering to the simple
        roots, (alpha[1], ...., alpha[l]).  Then the ijth
        entry of the Cartan matrix is (<alpha[i],alpha[j]>).

        Examples
        ========

        >>> from sympy.liealgebras.cartan_type import CartanType
        >>> c = CartanType('A4')
        >>> c.cartan_matrix()
        Matrix([
        [ 2, -1,  0,  0],
        [-1,  2, -1,  0],
        [ 0, -1,  2, -1],
        [ 0,  0, -1,  2]])


        """

        n = self.n  # 获取实例变量 self.n 的值
        m = 2*eye(n)  # 创建一个大小为 n x n 的单位矩阵的两倍
        for i in range(3, n - 1):  # 循环遍历从 3 到 n-2 的索引 i
            m[i, i+1] = -1  # 设置矩阵 m 中第 (i, i+1) 元素为 -1
            m[i, i-1] = -1  # 设置矩阵 m 中第 (i, i-1) 元素为 -1
        m[0, 2] = m[2, 0] = -1  # 设置矩阵 m 中第 (0, 2) 和 (2, 0) 元素为 -1
        m[1, 3] = m[3, 1] = -1  # 设置矩阵 m 中第 (1, 3) 和 (3, 1) 元素为 -1
        m[2, 3] = -1  # 设置矩阵 m 中第 (2, 3) 元素为 -1
        m[n-1, n-2] = -1  # 设置矩阵 m 中第 (n-1, n-2) 元素为 -1
        return m  # 返回生成的 Cartan 矩阵 m


    def basis(self):
        """
        Returns the number of independent generators of E_n
        """

        n = self.n  # 获取实例变量 self.n 的值
        if n == 6:
            return 78  # 如果 n 等于 6，返回 78
        if n == 7:
            return 133  # 如果 n 等于 7，返回 133
        if n == 8:
            return 248  # 如果 n 等于 8，返回 248


    def dynkin_diagram(self):
        n = self.n  # 获取实例变量 self.n 的值
        diag = " "*8 + str(2) + "\n"  # 创建一个字符串，包含一个数字 2
        diag += " "*8 + "0\n"  # 在前一个字符串的基础上添加一行包含数字 0 的字符串
        diag += " "*8 + "|\n"  # 在前一个字符串的基础上添加一行包含竖线字符的字符串
        diag += " "*8 + "|\n"  # 在前一个字符串的基础上再添加一行包含竖线字符的字符串
        diag += "---".join("0" for i in range(1, n)) + "\n"  # 添加一行由数字 0 组成的短线序列
        diag += "1   " + "   ".join(str(i) for i in range(3, n+1))  # 添加一行以数字 1 开头，后接由 3 到 n 的数字组成的字符串
        return diag  # 返回生成的 Dynkin 图形 diag
```