# `.\pytorch\.ci\docker\java\jni.h`

```
/*
 * Copyright (C) 2006 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*
 * JNI specification, as defined by Sun:
 * http://java.sun.com/javase/6/docs/technotes/guides/jni/spec/jniTOC.html
 *
 * Everything here is expected to be VM-neutral.
 */

#ifndef JNI_H_
#define JNI_H_

#include <stdarg.h>
#include <stdint.h>

/* Primitive types that match up with Java equivalents. */

// Java 中对应的原始类型
typedef uint8_t  jboolean; /* unsigned 8 bits */
typedef int8_t   jbyte;    /* signed 8 bits */
typedef uint16_t jchar;    /* unsigned 16 bits */
typedef int16_t  jshort;   /* signed 16 bits */
typedef int32_t  jint;     /* signed 32 bits */
typedef int64_t  jlong;    /* signed 64 bits */
typedef float    jfloat;   /* 32-bit IEEE 754 */
typedef double   jdouble;  /* 64-bit IEEE 754 */

/* "cardinal indices and sizes" */
typedef jint     jsize;

#ifdef __cplusplus
/*
 * Reference types, in C++
 */

// 在 C++ 中的引用类型定义
class _jobject {};
class _jclass : public _jobject {};
class _jstring : public _jobject {};
class _jarray : public _jobject {};
class _jobjectArray : public _jarray {};
class _jbooleanArray : public _jarray {};
class _jbyteArray : public _jarray {};
class _jcharArray : public _jarray {};
class _jshortArray : public _jarray {};
class _jintArray : public _jarray {};
class _jlongArray : public _jarray {};
class _jfloatArray : public _jarray {};
class _jdoubleArray : public _jarray {};
class _jthrowable : public _jobject {};

// C++ 中的引用类型别名
typedef _jobject*       jobject;
typedef _jclass*        jclass;
typedef _jstring*       jstring;
typedef _jarray*        jarray;
typedef _jobjectArray*  jobjectArray;
typedef _jbooleanArray* jbooleanArray;
typedef _jbyteArray*    jbyteArray;
typedef _jcharArray*    jcharArray;
typedef _jshortArray*   jshortArray;
typedef _jintArray*     jintArray;
typedef _jlongArray*    jlongArray;
typedef _jfloatArray*   jfloatArray;
typedef _jdoubleArray*  jdoubleArray;
typedef _jthrowable*    jthrowable;
typedef _jobject*       jweak;

#else /* not __cplusplus */

/*
 * Reference types, in C.
 */

// 在 C 中的引用类型定义
typedef void*           jobject;
typedef jobject         jclass;
typedef jobject         jstring;
typedef jobject         jarray;
typedef jarray          jobjectArray;
typedef jarray          jbooleanArray;
typedef jarray          jbyteArray;
typedef jarray          jcharArray;
typedef jarray          jshortArray;
typedef jarray          jintArray;
typedef jarray          jlongArray;
typedef jarray          jfloatArray;
typedef jarray          jdoubleArray;      // 定义 jdoubleArray 作为 jarray 的别名，表示 double 类型的数组
typedef jobject         jthrowable;        // 定义 jthrowable 作为 jobject 的别名，表示可以抛出的对象
typedef jobject         jweak;             // 定义 jweak 作为 jobject 的别名，表示弱引用的对象

#endif /* not __cplusplus */

struct _jfieldID;                         // 不透明结构体 _jfieldID 的声明
typedef struct _jfieldID* jfieldID;        // jfieldID 是指向 _jfieldID 不透明结构体的指针，表示字段标识符

struct _jmethodID;                        // 不透明结构体 _jmethodID 的声明
typedef struct _jmethodID* jmethodID;      // jmethodID 是指向 _jmethodID 不透明结构体的指针，表示方法标识符

struct JNIInvokeInterface;

typedef union jvalue {
    jboolean    z;                        // 布尔类型
    jbyte       b;                        // 字节类型
    jchar       c;                        // 字符类型
    jshort      s;                        // 短整型
    jint        i;                        // 整型
    jlong       j;                        // 长整型
    jfloat      f;                        // 浮点型
    jdouble     d;                        // 双精度浮点型
    jobject     l;                        // 对象引用
} jvalue;                                 // 联合体 jvalue，可以存储不同类型的值

typedef enum jobjectRefType {
    JNIInvalidRefType = 0,                // 无效引用类型
    JNILocalRefType = 1,                  // 本地引用类型
    JNIGlobalRefType = 2,                 // 全局引用类型
    JNIWeakGlobalRefType = 3              // 弱全局引用类型
} jobjectRefType;                         // 枚举类型 jobjectRefType，表示对象引用的类型

typedef struct {
    const char* name;                     // 方法名
    const char* signature;                // 方法签名
    void*       fnPtr;                    // 方法指针
} JNINativeMethod;                        // 结构体 JNINativeMethod，表示 JNI 的本地方法

struct _JNIEnv;
struct _JavaVM;
typedef const struct JNINativeInterface* C_JNIEnv;

#if defined(__cplusplus)
typedef _JNIEnv JNIEnv;                   // 如果是 C++ 环境，定义 JNIEnv 为 _JNIEnv
typedef _JavaVM JavaVM;                   // 如果是 C++ 环境，定义 JavaVM 为 _JavaVM
#else
typedef const struct JNINativeInterface* JNIEnv;  // 如果不是 C++ 环境，定义 JNIEnv 为 JNINativeInterface 结构体的指针
typedef const struct JNIInvokeInterface* JavaVM;  // 如果不是 C++ 环境，定义 JavaVM 为 JNIInvokeInterface 结构体的指针
#endif

/*
 * Table of interface function pointers.
 */
struct JNINativeInterface {
    void*       reserved0;                // 保留字段 0
    void*       reserved1;                // 保留字段 1
    void*       reserved2;                // 保留字段 2
    void*       reserved3;                // 保留字段 3

    jint        (*GetVersion)(JNIEnv *);  // 获取 JNI 版本号的函数指针

    jclass      (*DefineClass)(JNIEnv*, const char*, jobject, const jbyte*,
                        jsize);           // 定义类的函数指针，包括类名、类加载器、类数据、数据长度等参数
    jclass      (*FindClass)(JNIEnv*, const char*);  // 查找类的函数指针，包括类加载器和类名参数

    jmethodID   (*FromReflectedMethod)(JNIEnv*, jobject);  // 将反射方法转换为方法 ID 的函数指针
    jfieldID    (*FromReflectedField)(JNIEnv*, jobject);   // 将反射字段转换为字段 ID 的函数指针
    /* spec doesn't show jboolean parameter */
    jobject     (*ToReflectedMethod)(JNIEnv*, jclass, jmethodID, jboolean);  // 将方法 ID 转换为反射方法的函数指针

    jclass      (*GetSuperclass)(JNIEnv*, jclass);           // 获取超类的函数指针，包括当前类和类加载器参数
    jboolean    (*IsAssignableFrom)(JNIEnv*, jclass, jclass);  // 判断一个类是否可以从另一个类转换而来的函数指针

    /* spec doesn't show jboolean parameter */
    jobject     (*ToReflectedField)(JNIEnv*, jclass, jfieldID, jboolean);  // 将字段 ID 转换为反射字段的函数指针

    jint        (*Throw)(JNIEnv*, jthrowable);               // 抛出异常的函数指针，包括环境和异常参数
    jint        (*ThrowNew)(JNIEnv *, jclass, const char *); // 抛出新异常的函数指针，包括环境、类和异常消息参数
    jthrowable  (*ExceptionOccurred)(JNIEnv*);               // 获取当前异常的函数指针，包括环境参数
    void        (*ExceptionDescribe)(JNIEnv*);               // 描述异常的函数指针，包括环境参数
    void        (*ExceptionClear)(JNIEnv*);                  // 清除异常的函数指针，包括环境参数
    void        (*FatalError)(JNIEnv*, const char*);         // 致命错误处理函数指针，包括环境和错误消息参数

    jint        (*PushLocalFrame)(JNIEnv*, jint);            // 压入本地帧的函数指针，包括环境和帧大小参数
    jobject     (*PopLocalFrame)(JNIEnv*, jobject);         // 弹出本地帧的函数指针，包括环境和返回对象参数

    jobject     (*NewGlobalRef)(JNIEnv*, jobject);          // 创建全局引用的函数指针，包括环境和对象参数
    void        (*DeleteGlobalRef)(JNIEnv*, jobject);       // 删除全局引用的函数指针，包括环境和对象参数
    void        (*DeleteLocalRef)(JNIEnv*, jobject);        // 删除本地引用的函数指针，包括环境和对象参数
    jboolean    (*IsSameObject)(JNIEnv*, jobject, jobject); // 判断对象是否相同的函数指针，包括环境和两个对象参数

    jobject     (*NewLocalRef)(JNIEnv*, jobject);           // 创建本地引用的函数指针，包括环境和对象参数
    jint        (*EnsureLocalCapacity)(JNIEnv*, jint);      // 确保本地容量的函数指针，包括环境和容量参数

    jobject     (*AllocObject)(JNIEnv*, jclass);            // 分配对象的函数指针，包括环境和类参数
    jobject     (*NewObject)(JNIEnv*, jclass, jmethodID, ...);  // 创建对象的函数指针，包括环境、类、方法 ID 和可变参数列表
    jobject     (*NewObjectV)(JNIEnv*, jclass, jmethodID, va_list);  // 创建对象的函数指针，包括环境、类、方法 ID 和 va_list 参数
    jobject     (*NewObjectA)(JNIEnv*, jclass, jmethodID, const jvalue*);  // 创建对象的函数指针，包括环境、类、方法 ID 和 jvalue 参数
    # 声明函数指针，用于获取对象的类信息
    jclass      (*GetObjectClass)(JNIEnv*, jobject);
    # 声明函数指针，用于检查对象是否是某个类的实例
    jboolean    (*IsInstanceOf)(JNIEnv*, jobject, jclass);
    # 声明函数指针，用于获取指定方法的方法 ID

    # 声明函数指针，用于调用返回对象类型值的方法
    jobject     (*CallObjectMethod)(JNIEnv*, jobject, jmethodID, ...);
    jobject     (*CallObjectMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jobject     (*CallObjectMethodA)(JNIEnv*, jobject, jmethodID, const jvalue*);
    # 声明函数指针，用于调用返回布尔类型值的方法
    jboolean    (*CallBooleanMethod)(JNIEnv*, jobject, jmethodID, ...);
    jboolean    (*CallBooleanMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jboolean    (*CallBooleanMethodA)(JNIEnv*, jobject, jmethodID, const jvalue*);
    # 声明函数指针，用于调用返回字节类型值的方法
    jbyte       (*CallByteMethod)(JNIEnv*, jobject, jmethodID, ...);
    jbyte       (*CallByteMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jbyte       (*CallByteMethodA)(JNIEnv*, jobject, jmethodID, const jvalue*);
    # 声明函数指针，用于调用返回字符类型值的方法
    jchar       (*CallCharMethod)(JNIEnv*, jobject, jmethodID, ...);
    jchar       (*CallCharMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jchar       (*CallCharMethodA)(JNIEnv*, jobject, jmethodID, const jvalue*);
    # 声明函数指针，用于调用返回短整型值的方法
    jshort      (*CallShortMethod)(JNIEnv*, jobject, jmethodID, ...);
    jshort      (*CallShortMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jshort      (*CallShortMethodA)(JNIEnv*, jobject, jmethodID, const jvalue*);
    # 声明函数指针，用于调用返回整型值的方法
    jint        (*CallIntMethod)(JNIEnv*, jobject, jmethodID, ...);
    jint        (*CallIntMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jint        (*CallIntMethodA)(JNIEnv*, jobject, jmethodID, const jvalue*);
    # 声明函数指针，用于调用返回长整型值的方法
    jlong       (*CallLongMethod)(JNIEnv*, jobject, jmethodID, ...);
    jlong       (*CallLongMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jlong       (*CallLongMethodA)(JNIEnv*, jobject, jmethodID, const jvalue*);
    # 声明函数指针，用于调用返回浮点型值的方法
    jfloat      (*CallFloatMethod)(JNIEnv*, jobject, jmethodID, ...);
    jfloat      (*CallFloatMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jfloat      (*CallFloatMethodA)(JNIEnv*, jobject, jmethodID, const jvalue*);
    # 声明函数指针，用于调用返回双精度浮点型值的方法
    jdouble     (*CallDoubleMethod)(JNIEnv*, jobject, jmethodID, ...);
    jdouble     (*CallDoubleMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jdouble     (*CallDoubleMethodA)(JNIEnv*, jobject, jmethodID, const jvalue*);
    # 声明函数指针，用于调用返回无返回值的方法
    void        (*CallVoidMethod)(JNIEnv*, jobject, jmethodID, ...);
    void        (*CallVoidMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    void        (*CallVoidMethodA)(JNIEnv*, jobject, jmethodID, const jvalue*);

    # 声明函数指针，用于调用非虚方法返回对象类型值的方法
    jobject     (*CallNonvirtualObjectMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    jobject     (*CallNonvirtualObjectMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    jobject     (*CallNonvirtualObjectMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, const jvalue*);
    # 声明函数指针，用于调用非虚方法返回布尔类型值的方法
    jboolean    (*CallNonvirtualBooleanMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    // 声明一个函数指针，用于调用非虚拟方法并返回布尔值
    jboolean    (*CallNonvirtualBooleanMethodV)(JNIEnv*, jobject, jclass,
                         jmethodID, va_list);
    // 声明一个函数指针，用于调用非虚拟方法并返回布尔值，参数为可变参数列表
    jboolean    (*CallNonvirtualBooleanMethodA)(JNIEnv*, jobject, jclass,
                         jmethodID, const jvalue*);
    // 声明一个函数指针，用于调用非虚拟方法并返回字节
    jbyte       (*CallNonvirtualByteMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    // 声明一个函数指针，用于调用非虚拟方法并返回字节，参数为可变参数列表
    jbyte       (*CallNonvirtualByteMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    // 声明一个函数指针，用于调用非虚拟方法并返回字节，参数为常量值数组
    jbyte       (*CallNonvirtualByteMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, const jvalue*);
    // 声明一个函数指针，用于调用非虚拟方法并返回字符
    jchar       (*CallNonvirtualCharMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    // 声明一个函数指针，用于调用非虚拟方法并返回字符，参数为可变参数列表
    jchar       (*CallNonvirtualCharMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    // 声明一个函数指针，用于调用非虚拟方法并返回字符，参数为常量值数组
    jchar       (*CallNonvirtualCharMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, const jvalue*);
    // 声明一个函数指针，用于调用非虚拟方法并返回短整型
    jshort      (*CallNonvirtualShortMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    // 声明一个函数指针，用于调用非虚拟方法并返回短整型，参数为可变参数列表
    jshort      (*CallNonvirtualShortMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    // 声明一个函数指针，用于调用非虚拟方法并返回短整型，参数为常量值数组
    jshort      (*CallNonvirtualShortMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, const jvalue*);
    // 声明一个函数指针，用于调用非虚拟方法并返回整型
    jint        (*CallNonvirtualIntMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    // 声明一个函数指针，用于调用非虚拟方法并返回整型，参数为可变参数列表
    jint        (*CallNonvirtualIntMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    // 声明一个函数指针，用于调用非虚拟方法并返回整型，参数为常量值数组
    jint        (*CallNonvirtualIntMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, const jvalue*);
    // 声明一个函数指针，用于调用非虚拟方法并返回长整型
    jlong       (*CallNonvirtualLongMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    // 声明一个函数指针，用于调用非虚拟方法并返回长整型，参数为可变参数列表
    jlong       (*CallNonvirtualLongMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    // 声明一个函数指针，用于调用非虚拟方法并返回长整型，参数为常量值数组
    jlong       (*CallNonvirtualLongMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, const jvalue*);
    // 声明一个函数指针，用于调用非虚拟方法并返回单精度浮点数
    jfloat      (*CallNonvirtualFloatMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    // 声明一个函数指针，用于调用非虚拟方法并返回单精度浮点数，参数为可变参数列表
    jfloat      (*CallNonvirtualFloatMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    // 声明一个函数指针，用于调用非虚拟方法并返回单精度浮点数，参数为常量值数组
    jfloat      (*CallNonvirtualFloatMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, const jvalue*);
    // 声明一个函数指针，用于调用非虚拟方法并返回双精度浮点数
    jdouble     (*CallNonvirtualDoubleMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    // 声明一个函数指针，用于调用非虚拟方法并返回双精度浮点数，参数为可变参数列表
    jdouble     (*CallNonvirtualDoubleMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    // 声明一个函数指针，用于调用非虚拟方法并返回双精度浮点数，参数为常量值数组
    jdouble     (*CallNonvirtualDoubleMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, const jvalue*);
    // 声明一个函数指针，用于调用非虚拟方法并返回空值
    void        (*CallNonvirtualVoidMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    // 声明一个函数指针，用于调用非虚拟方法并返回空值，参数为可变参数列表
    void        (*CallNonvirtualVoidMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    // 定义函数指针 CallNonvirtualVoidMethodA，用于调用非虚方法并返回 void
    void        (*CallNonvirtualVoidMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, const jvalue*);

    // 定义函数指针 GetFieldID，用于获取指定类的字段 ID
    jfieldID    (*GetFieldID)(JNIEnv*, jclass, const char*, const char*);

    // 定义函数指针 GetObjectField，用于获取对象字段的值
    jobject     (*GetObjectField)(JNIEnv*, jobject, jfieldID);
    // 定义函数指针 GetBooleanField，用于获取 boolean 类型的字段值
    jboolean    (*GetBooleanField)(JNIEnv*, jobject, jfieldID);
    // 定义函数指针 GetByteField，用于获取 byte 类型的字段值
    jbyte       (*GetByteField)(JNIEnv*, jobject, jfieldID);
    // 定义函数指针 GetCharField，用于获取 char 类型的字段值
    jchar       (*GetCharField)(JNIEnv*, jobject, jfieldID);
    // 定义函数指针 GetShortField，用于获取 short 类型的字段值
    jshort      (*GetShortField)(JNIEnv*, jobject, jfieldID);
    // 定义函数指针 GetIntField，用于获取 int 类型的字段值
    jint        (*GetIntField)(JNIEnv*, jobject, jfieldID);
    // 定义函数指针 GetLongField，用于获取 long 类型的字段值
    jlong       (*GetLongField)(JNIEnv*, jobject, jfieldID);
    // 定义函数指针 GetFloatField，用于获取 float 类型的字段值
    jfloat      (*GetFloatField)(JNIEnv*, jobject, jfieldID);
    // 定义函数指针 GetDoubleField，用于获取 double 类型的字段值
    jdouble     (*GetDoubleField)(JNIEnv*, jobject, jfieldID);

    // 定义函数指针 SetObjectField，用于设置对象字段的值
    void        (*SetObjectField)(JNIEnv*, jobject, jfieldID, jobject);
    // 定义函数指针 SetBooleanField，用于设置 boolean 类型的字段值
    void        (*SetBooleanField)(JNIEnv*, jobject, jfieldID, jboolean);
    // 定义函数指针 SetByteField，用于设置 byte 类型的字段值
    void        (*SetByteField)(JNIEnv*, jobject, jfieldID, jbyte);
    // 定义函数指针 SetCharField，用于设置 char 类型的字段值
    void        (*SetCharField)(JNIEnv*, jobject, jfieldID, jchar);
    // 定义函数指针 SetShortField，用于设置 short 类型的字段值
    void        (*SetShortField)(JNIEnv*, jobject, jfieldID, jshort);
    // 定义函数指针 SetIntField，用于设置 int 类型的字段值
    void        (*SetIntField)(JNIEnv*, jobject, jfieldID, jint);
    // 定义函数指针 SetLongField，用于设置 long 类型的字段值
    void        (*SetLongField)(JNIEnv*, jobject, jfieldID, jlong);
    // 定义函数指针 SetFloatField，用于设置 float 类型的字段值
    void        (*SetFloatField)(JNIEnv*, jobject, jfieldID, jfloat);
    // 定义函数指针 SetDoubleField，用于设置 double 类型的字段值
    void        (*SetDoubleField)(JNIEnv*, jobject, jfieldID, jdouble);

    // 定义函数指针 GetStaticMethodID，用于获取静态方法的方法 ID
    jmethodID   (*GetStaticMethodID)(JNIEnv*, jclass, const char*, const char*);

    // 定义函数指针 CallStaticObjectMethod，用于调用静态方法并返回对象
    jobject     (*CallStaticObjectMethod)(JNIEnv*, jclass, jmethodID, ...);
    // 定义函数指针 CallStaticObjectMethodV，用于以 va_list 方式调用静态方法并返回对象
    jobject     (*CallStaticObjectMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    // 定义函数指针 CallStaticObjectMethodA，用于以 jvalue* 方式调用静态方法并返回对象
    jobject     (*CallStaticObjectMethodA)(JNIEnv*, jclass, jmethodID, const jvalue*);

    // 定义函数指针 CallStaticBooleanMethod，用于调用静态方法并返回 boolean 类型值
    jboolean    (*CallStaticBooleanMethod)(JNIEnv*, jclass, jmethodID, ...);
    // 定义函数指针 CallStaticBooleanMethodV，用于以 va_list 方式调用静态方法并返回 boolean 类型值
    jboolean    (*CallStaticBooleanMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    // 定义函数指针 CallStaticBooleanMethodA，用于以 jvalue* 方式调用静态方法并返回 boolean 类型值
    jboolean    (*CallStaticBooleanMethodA)(JNIEnv*, jclass, jmethodID, const jvalue*);

    // 定义函数指针 CallStaticByteMethod，用于调用静态方法并返回 byte 类型值
    jbyte       (*CallStaticByteMethod)(JNIEnv*, jclass, jmethodID, ...);
    // 定义函数指针 CallStaticByteMethodV，用于以 va_list 方式调用静态方法并返回 byte 类型值
    jbyte       (*CallStaticByteMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    // 定义函数指针 CallStaticByteMethodA，用于以 jvalue* 方式调用静态方法并返回 byte 类型值
    jbyte       (*CallStaticByteMethodA)(JNIEnv*, jclass, jmethodID, const jvalue*);

    // 定义函数指针 CallStaticCharMethod，用于调用静态方法并返回 char 类型值
    jchar       (*CallStaticCharMethod)(JNIEnv*, jclass, jmethodID, ...);
    // 定义函数指针 CallStaticCharMethodV，用于以 va_list 方式调用静态方法并返回 char 类型值
    jchar       (*CallStaticCharMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    // 定义函数指针 CallStaticCharMethodA，用于以 jvalue* 方式调用静态方法并返回 char 类型值
    jchar       (*CallStaticCharMethodA)(JNIEnv*, jclass, jmethodID, const jvalue*);

    // 定义函数指针 CallStaticShortMethod，用于调用静态方法并返回 short 类型值
    jshort      (*CallStaticShortMethod)(JNIEnv*, jclass, jmethodID, ...);
    // 定义函数指针 CallStaticShortMethodV，用于以 va_list 方式调用静态方法并返回 short 类型值
    jshort      (*CallStaticShortMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    // 定义函数指针 CallStaticShortMethodA，用于以 jvalue* 方式调用静态方法并返回 short 类型值
    jshort      (*CallStaticShortMethodA)(JNIEnv*, jclass, jmethodID, const jvalue*);

    // 定义函数指针 CallStaticIntMethod，用于调用静态方法并返回 int 类型值
    jint        (*CallStaticIntMethod)(JNIEnv*, jclass, jmethodID, ...);
    // 定义函数指针 CallStaticIntMethodV，用于以 va_list 方式调用静态方法并返回 int 类型值
    jint        (*CallStaticIntMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    // 定义函数指针 CallStaticIntMethodA，用于以 jvalue* 方式调用静态方法并返回 int 类型值
    jint        (*CallStaticIntMethodA)(JNIEnv*, jclass, jmethodID, const jvalue*);
    # 声明一个指向函数的指针，该函数返回 jlong 类型，用于调用静态方法（带可变参数）
    jlong       (*CallStaticLongMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 声明一个指向函数的指针，该函数返回 jlong 类型，用于调用静态方法（带 va_list 参数）
    jlong       (*CallStaticLongMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 声明一个指向函数的指针，该函数返回 jlong 类型，用于调用静态方法（带 const jvalue* 参数）
    jlong       (*CallStaticLongMethodA)(JNIEnv*, jclass, jmethodID, const jvalue*);

    # 声明一个指向函数的指针，该函数返回 jfloat 类型，用于调用静态方法（带可变参数）
    jfloat      (*CallStaticFloatMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 声明一个指向函数的指针，该函数返回 jfloat 类型，用于调用静态方法（带 va_list 参数）
    jfloat      (*CallStaticFloatMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 声明一个指向函数的指针，该函数返回 jfloat 类型，用于调用静态方法（带 const jvalue* 参数）
    jfloat      (*CallStaticFloatMethodA)(JNIEnv*, jclass, jmethodID, const jvalue*);

    # 声明一个指向函数的指针，该函数返回 jdouble 类型，用于调用静态方法（带可变参数）
    jdouble     (*CallStaticDoubleMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 声明一个指向函数的指针，该函数返回 jdouble 类型，用于调用静态方法（带 va_list 参数）
    jdouble     (*CallStaticDoubleMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 声明一个指向函数的指针，该函数返回 jdouble 类型，用于调用静态方法（带 const jvalue* 参数）
    jdouble     (*CallStaticDoubleMethodA)(JNIEnv*, jclass, jmethodID, const jvalue*);

    # 声明一个指向函数的指针，该函数返回 void 类型，用于调用静态方法（带可变参数）
    void        (*CallStaticVoidMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 声明一个指向函数的指针，该函数返回 void 类型，用于调用静态方法（带 va_list 参数）
    void        (*CallStaticVoidMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 声明一个指向函数的指针，该函数返回 void 类型，用于调用静态方法（带 const jvalue* 参数）
    void        (*CallStaticVoidMethodA)(JNIEnv*, jclass, jmethodID, const jvalue*);

    # 声明一个指向函数的指针，该函数返回 jfieldID 类型，用于获取静态字段的 ID
    jfieldID    (*GetStaticFieldID)(JNIEnv*, jclass, const char*, const char*);

    # 声明一个指向函数的指针，该函数返回 jobject 类型，用于获取静态对象字段的值
    jobject     (*GetStaticObjectField)(JNIEnv*, jclass, jfieldID);
    # 声明一个指向函数的指针，该函数返回 jboolean 类型，用于获取静态 boolean 字段的值
    jboolean    (*GetStaticBooleanField)(JNIEnv*, jclass, jfieldID);
    # 声明一个指向函数的指针，该函数返回 jbyte 类型，用于获取静态 byte 字段的值
    jbyte       (*GetStaticByteField)(JNIEnv*, jclass, jfieldID);
    # 声明一个指向函数的指针，该函数返回 jchar 类型，用于获取静态 char 字段的值
    jchar       (*GetStaticCharField)(JNIEnv*, jclass, jfieldID);
    # 声明一个指向函数的指针，该函数返回 jshort 类型，用于获取静态 short 字段的值
    jshort      (*GetStaticShortField)(JNIEnv*, jclass, jfieldID);
    # 声明一个指向函数的指针，该函数返回 jint 类型，用于获取静态 int 字段的值
    jint        (*GetStaticIntField)(JNIEnv*, jclass, jfieldID);
    # 声明一个指向函数的指针，该函数返回 jlong 类型，用于获取静态 long 字段的值
    jlong       (*GetStaticLongField)(JNIEnv*, jclass, jfieldID);
    # 声明一个指向函数的指针，该函数返回 jfloat 类型，用于获取静态 float 字段的值
    jfloat      (*GetStaticFloatField)(JNIEnv*, jclass, jfieldID);
    # 声明一个指向函数的指针，该函数返回 jdouble 类型，用于获取静态 double 字段的值
    jdouble     (*GetStaticDoubleField)(JNIEnv*, jclass, jfieldID);

    # 声明一个指向函数的指针，该函数返回 void 类型，用于设置静态对象字段的值
    void        (*SetStaticObjectField)(JNIEnv*, jclass, jfieldID, jobject);
    # 声明一个指向函数的指针，该函数返回 void 类型，用于设置静态 boolean 字段的值
    void        (*SetStaticBooleanField)(JNIEnv*, jclass, jfieldID, jboolean);
    # 声明一个指向函数的指针，该函数返回 void 类型，用于设置静态 byte 字段的值
    void        (*SetStaticByteField)(JNIEnv*, jclass, jfieldID, jbyte);
    # 声明一个指向函数的指针，该函数返回 void 类型，用于设置静态 char 字段的值
    void        (*SetStaticCharField)(JNIEnv*, jclass, jfieldID, jchar);
    # 声明一个指向函数的指针，该函数返回 void 类型，用于设置静态 short 字段的值
    void        (*SetStaticShortField)(JNIEnv*, jclass, jfieldID, jshort);
    # 声明一个指向函数的指针，该函数返回 void 类型，用于设置静态 int 字段的值
    void        (*SetStaticIntField)(JNIEnv*, jclass, jfieldID, jint);
    # 声明一个指向函数的指针，该函数返回 void 类型，用于设置静态 long 字段的值
    void        (*SetStaticLongField)(JNIEnv*, jclass, jfieldID, jlong);
    # 声明一个指向函数的指针，该函数返回 void 类型，用于设置静态 float 字段的值
    void        (*SetStaticFloatField)(JNIEnv*, jclass, jfieldID, jfloat);
    # 声明一个指向函数的指针，该函数返回 void 类型，用于设置静态 double 字段的值
    void        (*SetStaticDoubleField)(JNIEnv*, jclass, jfieldID, jdouble);

    # 声明一个指向函数的指针，该函数返回 jstring 类型，用于创建新的 jstring 对象（Unicode 编码）
    jstring     (*NewString)(JNIEnv*, const jchar*, jsize);
    # 声明一个指向函数的指针，该函数返回 jsize 类型，用于获取 jstring 对象的长度
    jsize       (*GetStringLength)(JNIEnv*, jstring);
    # 声明一个指向函数的指针，该函数返回 const jchar* 类型，用于获取 jstring 对象的字符内容
    const jchar* (*GetStringChars)(JNIEnv*, jstring, jboolean*);
    # 声明一个指向函数的指针，该函数返回 void 类型，用于释放 jstring 对象的字符内容
    void        (*ReleaseStringChars)(JNIEnv*, jstring, const jchar*);
    # 声明一个指向函数的指针，该函数返回 jstring 类型，用于创建新的 jstring 对象（UTF-8 编码）
    jstring     (*NewStringUTF)(JNIEnv*, const char*);
    # 声明一个指向函数的指针，该函数返回 jsize 类型，用于获取 jstring 对象的 UTF-8 编码长度
    jsize       (*GetStringUTFLength)(JNIEnv*, jstring);
    # 声明一个指向函数的指针
    # 定义函数指针 NewObjectArray，用于创建对象数组
    jobjectArray (*NewObjectArray)(JNIEnv*, jsize, jclass, jobject);
    
    # 定义函数指针 GetObjectArrayElement，用于获取对象数组中特定索引的元素
    jobject (*GetObjectArrayElement)(JNIEnv*, jobjectArray, jsize);
    
    # 定义函数指针 SetObjectArrayElement，用于设置对象数组中特定索引的元素
    void (*SetObjectArrayElement)(JNIEnv*, jobjectArray, jsize, jobject);
    
    # 定义函数指针 NewBooleanArray，用于创建 boolean 数组
    jbooleanArray (*NewBooleanArray)(JNIEnv*, jsize);
    
    # 定义函数指针 NewByteArray，用于创建 byte 数组
    jbyteArray (*NewByteArray)(JNIEnv*, jsize);
    
    # 定义函数指针 NewCharArray，用于创建 char 数组
    jcharArray (*NewCharArray)(JNIEnv*, jsize);
    
    # 定义函数指针 NewShortArray，用于创建 short 数组
    jshortArray (*NewShortArray)(JNIEnv*, jsize);
    
    # 定义函数指针 NewIntArray，用于创建 int 数组
    jintArray (*NewIntArray)(JNIEnv*, jsize);
    
    # 定义函数指针 NewLongArray，用于创建 long 数组
    jlongArray (*NewLongArray)(JNIEnv*, jsize);
    
    # 定义函数指针 NewFloatArray，用于创建 float 数组
    jfloatArray (*NewFloatArray)(JNIEnv*, jsize);
    
    # 定义函数指针 NewDoubleArray，用于创建 double 数组
    jdoubleArray (*NewDoubleArray)(JNIEnv*, jsize);
    
    # 定义函数指针 GetBooleanArrayElements，用于获取 boolean 数组的元素
    jboolean* (*GetBooleanArrayElements)(JNIEnv*, jbooleanArray, jboolean*);
    
    # 定义函数指针 GetByteArrayElements，用于获取 byte 数组的元素
    jbyte* (*GetByteArrayElements)(JNIEnv*, jbyteArray, jboolean*);
    
    # 定义函数指针 GetCharArrayElements，用于获取 char 数组的元素
    jchar* (*GetCharArrayElements)(JNIEnv*, jcharArray, jboolean*);
    
    # 定义函数指针 GetShortArrayElements，用于获取 short 数组的元素
    jshort* (*GetShortArrayElements)(JNIEnv*, jshortArray, jboolean*);
    
    # 定义函数指针 GetIntArrayElements，用于获取 int 数组的元素
    jint* (*GetIntArrayElements)(JNIEnv*, jintArray, jboolean*);
    
    # 定义函数指针 GetLongArrayElements，用于获取 long 数组的元素
    jlong* (*GetLongArrayElements)(JNIEnv*, jlongArray, jboolean*);
    
    # 定义函数指针 GetFloatArrayElements，用于获取 float 数组的元素
    jfloat* (*GetFloatArrayElements)(JNIEnv*, jfloatArray, jboolean*);
    
    # 定义函数指针 GetDoubleArrayElements，用于获取 double 数组的元素
    jdouble* (*GetDoubleArrayElements)(JNIEnv*, jdoubleArray, jboolean*);
    
    # 定义函数指针 ReleaseBooleanArrayElements，用于释放 boolean 数组的元素
    void (*ReleaseBooleanArrayElements)(JNIEnv*, jbooleanArray, jboolean*, jint);
    
    # 定义函数指针 ReleaseByteArrayElements，用于释放 byte 数组的元素
    void (*ReleaseByteArrayElements)(JNIEnv*, jbyteArray, jbyte*, jint);
    
    # 定义函数指针 ReleaseCharArrayElements，用于释放 char 数组的元素
    void (*ReleaseCharArrayElements)(JNIEnv*, jcharArray, jchar*, jint);
    
    # 定义函数指针 ReleaseShortArrayElements，用于释放 short 数组的元素
    void (*ReleaseShortArrayElements)(JNIEnv*, jshortArray, jshort*, jint);
    
    # 定义函数指针 ReleaseIntArrayElements，用于释放 int 数组的元素
    void (*ReleaseIntArrayElements)(JNIEnv*, jintArray, jint*, jint);
    
    # 定义函数指针 ReleaseLongArrayElements，用于释放 long 数组的元素
    void (*ReleaseLongArrayElements)(JNIEnv*, jlongArray, jlong*, jint);
    
    # 定义函数指针 ReleaseFloatArrayElements，用于释放 float 数组的元素
    void (*ReleaseFloatArrayElements)(JNIEnv*, jfloatArray, jfloat*, jint);
    
    # 定义函数指针 ReleaseDoubleArrayElements，用于释放 double 数组的元素
    void (*ReleaseDoubleArrayElements)(JNIEnv*, jdoubleArray, jdouble*, jint);
    
    # 定义函数指针 GetBooleanArrayRegion，用于获取 boolean 数组的指定区域
    void (*GetBooleanArrayRegion)(JNIEnv*, jbooleanArray, jsize, jsize, jboolean*);
    
    # 定义函数指针 GetByteArrayRegion，用于获取 byte 数组的指定区域
    void (*GetByteArrayRegion)(JNIEnv*, jbyteArray, jsize, jsize, jbyte*);
    
    # 定义函数指针 GetCharArrayRegion，用于获取 char 数组的指定区域
    void (*GetCharArrayRegion)(JNIEnv*, jcharArray, jsize, jsize, jchar*);
    
    # 定义函数指针 GetShortArrayRegion，用于获取 short 数组的指定区域
    void (*GetShortArrayRegion)(JNIEnv*, jshortArray, jsize, jsize, jshort*);
    
    # 定义函数指针 GetIntArrayRegion，用于获取 int 数组的指定区域
    void (*GetIntArrayRegion)(JNIEnv*, jintArray, jsize, jsize, jint*);
    
    # 定义函数指针 GetLongArrayRegion，用于获取 long 数组的指定区域
    void (*GetLongArrayRegion)(JNIEnv*, jlongArray, jsize, jsize, jlong*);
    
    # 定义函数指针 GetFloatArrayRegion，用于获取 float 数组的指定区域
    void (*GetFloatArrayRegion)(JNIEnv*, jfloatArray, jsize, jsize, jfloat*);
    
    # 定义函数指针 GetDoubleArrayRegion，用于获取 double 数组的指定区域
    void (*GetDoubleArrayRegion)(JNIEnv*, jdoubleArray, jsize, jsize, jdouble*);
    /* spec shows these without const; some jni.h do, some don't */
    // 声明一个函数指针，用于设置 jbooleanArray 数组的指定区域
    void        (*SetBooleanArrayRegion)(JNIEnv*, jbooleanArray,
                        jsize, jsize, const jboolean*);
    // 声明一个函数指针，用于设置 jbyteArray 数组的指定区域
    void        (*SetByteArrayRegion)(JNIEnv*, jbyteArray,
                        jsize, jsize, const jbyte*);
    // 声明一个函数指针，用于设置 jcharArray 数组的指定区域
    void        (*SetCharArrayRegion)(JNIEnv*, jcharArray,
                        jsize, jsize, const jchar*);
    // 声明一个函数指针，用于设置 jshortArray 数组的指定区域
    void        (*SetShortArrayRegion)(JNIEnv*, jshortArray,
                        jsize, jsize, const jshort*);
    // 声明一个函数指针，用于设置 jintArray 数组的指定区域
    void        (*SetIntArrayRegion)(JNIEnv*, jintArray,
                        jsize, jsize, const jint*);
    // 声明一个函数指针，用于设置 jlongArray 数组的指定区域
    void        (*SetLongArrayRegion)(JNIEnv*, jlongArray,
                        jsize, jsize, const jlong*);
    // 声明一个函数指针，用于设置 jfloatArray 数组的指定区域
    void        (*SetFloatArrayRegion)(JNIEnv*, jfloatArray,
                        jsize, jsize, const jfloat*);
    // 声明一个函数指针，用于设置 jdoubleArray 数组的指定区域
    void        (*SetDoubleArrayRegion)(JNIEnv*, jdoubleArray,
                        jsize, jsize, const jdouble*);

    // 声明一个函数指针，用于注册本地方法
    jint        (*RegisterNatives)(JNIEnv*, jclass, const JNINativeMethod*,
                        jint);
    // 声明一个函数指针，用于取消注册本地方法
    jint        (*UnregisterNatives)(JNIEnv*, jclass);
    // 声明一个函数指针，用于进入对象的监视器（锁定）
    jint        (*MonitorEnter)(JNIEnv*, jobject);
    // 声明一个函数指针，用于退出对象的监视器（解锁）
    jint        (*MonitorExit)(JNIEnv*, jobject);
    // 声明一个函数指针，用于获取当前的 Java 虚拟机接口
    jint        (*GetJavaVM)(JNIEnv*, JavaVM**);

    // 声明一个函数指针，用于获取 jstring 的指定区域的字符数据
    void        (*GetStringRegion)(JNIEnv*, jstring, jsize, jsize, jchar*);
    // 声明一个函数指针，用于获取 jstring 的指定区域的 UTF-8 字符数据
    void        (*GetStringUTFRegion)(JNIEnv*, jstring, jsize, jsize, char*);

    // 声明一个函数指针，用于获取原始数组的临界区域指针
    void*       (*GetPrimitiveArrayCritical)(JNIEnv*, jarray, jboolean*);
    // 声明一个函数指针，用于释放原始数组的临界区域指针
    void        (*ReleasePrimitiveArrayCritical)(JNIEnv*, jarray, void*, jint);

    // 声明一个函数指针，用于获取 jstring 的临界区域指针
    const jchar* (*GetStringCritical)(JNIEnv*, jstring, jboolean*);
    // 声明一个函数指针，用于释放 jstring 的临界区域指针
    void        (*ReleaseStringCritical)(JNIEnv*, jstring, const jchar*);

    // 声明一个函数指针，用于创建一个全局弱引用
    jweak       (*NewWeakGlobalRef)(JNIEnv*, jobject);
    // 声明一个函数指针，用于删除一个全局弱引用
    void        (*DeleteWeakGlobalRef)(JNIEnv*, jweak);

    // 声明一个函数指针，用于检查当前是否有异常发生
    jboolean    (*ExceptionCheck)(JNIEnv*);

    // 声明一个函数指针，用于创建一个直接的字节缓冲区
    jobject     (*NewDirectByteBuffer)(JNIEnv*, void*, jlong);
    // 声明一个函数指针，用于获取直接字节缓冲区的地址
    void*       (*GetDirectBufferAddress)(JNIEnv*, jobject);
    // 声明一个函数指针，用于获取直接字节缓冲区的容量
    jlong       (*GetDirectBufferCapacity)(JNIEnv*, jobject);

    /* added in JNI 1.6 */
    // 声明一个函数指针，用于获取对象的引用类型
    jobjectRefType (*GetObjectRefType)(JNIEnv*, jobject);
};

/*
 * C++ object wrapper.
 *
 * This is usually overlaid on a C struct whose first element is a
 * JNINativeInterface*.  We rely somewhat on compiler behavior.
 */
// _JNIEnv 结构体定义，用于封装 JNI 接口
struct _JNIEnv {
    /* do not rename this; it does not seem to be entirely opaque */
    // 指向 JNINativeInterface 结构体的指针，命名不可更改，似乎不是完全不透明
    const struct JNINativeInterface* functions;

#if defined(__cplusplus)

    // 获取 JNI 版本号
    jint GetVersion()
    { return functions->GetVersion(this); }

    // 定义类
    jclass DefineClass(const char *name, jobject loader, const jbyte* buf,
        jsize bufLen)
    { return functions->DefineClass(this, name, loader, buf, bufLen); }

    // 查找类
    jclass FindClass(const char* name)
    { return functions->FindClass(this, name); }

    // 从反射方法获取方法 ID
    jmethodID FromReflectedMethod(jobject method)
    { return functions->FromReflectedMethod(this, method); }

    // 从反射字段获取字段 ID
    jfieldID FromReflectedField(jobject field)
    { return functions->FromReflectedField(this, field); }

    // 转换为反射方法
    jobject ToReflectedMethod(jclass cls, jmethodID methodID, jboolean isStatic)
    { return functions->ToReflectedMethod(this, cls, methodID, isStatic); }

    // 获取超类
    jclass GetSuperclass(jclass clazz)
    { return functions->GetSuperclass(this, clazz); }

    // 判断类之间是否兼容
    jboolean IsAssignableFrom(jclass clazz1, jclass clazz2)
    { return functions->IsAssignableFrom(this, clazz1, clazz2); }

    // 转换为反射字段
    jobject ToReflectedField(jclass cls, jfieldID fieldID, jboolean isStatic)
    { return functions->ToReflectedField(this, cls, fieldID, isStatic); }

    // 抛出异常
    jint Throw(jthrowable obj)
    { return functions->Throw(this, obj); }

    // 抛出新异常
    jint ThrowNew(jclass clazz, const char* message)
    { return functions->ThrowNew(this, clazz, message); }

    // 检查是否有异常发生
    jthrowable ExceptionOccurred()
    { return functions->ExceptionOccurred(this); }

    // 描述当前异常
    void ExceptionDescribe()
    { functions->ExceptionDescribe(this); }

    // 清除当前异常
    void ExceptionClear()
    { functions->ExceptionClear(this); }

    // 致命错误处理
    void FatalError(const char* msg)
    { functions->FatalError(this, msg); }

    // 压入本地帧
    jint PushLocalFrame(jint capacity)
    { return functions->PushLocalFrame(this, capacity); }

    // 弹出本地帧
    jobject PopLocalFrame(jobject result)
    { return functions->PopLocalFrame(this, result); }

    // 创建全局引用
    jobject NewGlobalRef(jobject obj)
    { return functions->NewGlobalRef(this, obj); }

    // 删除全局引用
    void DeleteGlobalRef(jobject globalRef)
    { functions->DeleteGlobalRef(this, globalRef); }

    // 删除本地引用
    void DeleteLocalRef(jobject localRef)
    { functions->DeleteLocalRef(this, localRef); }

    // 检查两个对象是否相同
    jboolean IsSameObject(jobject ref1, jobject ref2)
    { return functions->IsSameObject(this, ref1, ref2); }

    // 创建本地引用
    jobject NewLocalRef(jobject ref)
    { return functions->NewLocalRef(this, ref); }

    // 确保本地引用的容量
    jint EnsureLocalCapacity(jint capacity)
    { return functions->EnsureLocalCapacity(this, capacity); }

    // 分配对象
    jobject AllocObject(jclass clazz)
    { return functions->AllocObject(this, clazz); }

    // 创建新对象
    jobject NewObject(jclass clazz, jmethodID methodID, ...)
    {
        // 声明一个 va_list 类型的变量 args，用于存储可变参数列表
        va_list args;
        // 初始化可变参数列表 args，从 methodID 开始
        va_start(args, methodID);
        // 调用 JNI 函数 NewObjectV 创建一个新的 Java 对象
        jobject result = functions->NewObjectV(this, clazz, methodID, args);
        // 结束可变参数列表的使用
        va_end(args);
        // 返回创建的 Java 对象
        return result;
    }
    
    jobject NewObjectV(jclass clazz, jmethodID methodID, va_list args)
    { 
        // 调用 JNI 函数 NewObjectV 创建一个新的 Java 对象，使用给定的参数列表 args
        return functions->NewObjectV(this, clazz, methodID, args); 
    }
    
    jobject NewObjectA(jclass clazz, jmethodID methodID, const jvalue* args)
    { 
        // 调用 JNI 函数 NewObjectA 创建一个新的 Java 对象，使用给定的参数数组 args
        return functions->NewObjectA(this, clazz, methodID, args); 
    }
    
    jclass GetObjectClass(jobject obj)
    { 
        // 调用 JNI 函数 GetObjectClass 获取 Java 对象 obj 的类对象
        return functions->GetObjectClass(this, obj); 
    }
    
    jboolean IsInstanceOf(jobject obj, jclass clazz)
    { 
        // 调用 JNI 函数 IsInstanceOf 判断 Java 对象 obj 是否是类 clazz 的实例
        return functions->IsInstanceOf(this, obj, clazz); 
    }
    
    jmethodID GetMethodID(jclass clazz, const char* name, const char* sig)
    { 
        // 调用 JNI 函数 GetMethodID 获取类 clazz 中方法名为 name，签名为 sig 的方法的 ID
        return functions->GetMethodID(this, clazz, name, sig); 
    }
#define CALL_TYPE_METHOD(_jtype, _jname)                                    \
    // 定义一个宏，用于调用具有返回类型 _jtype 的 Java 对象方法 _jname
    _jtype Call##_jname##Method(jobject obj, jmethodID methodID, ...)       \
    {                                                                       \
        // 声明结果变量
        _jtype result;                                                      \
        // 声明可变参数列表
        va_list args;                                                       \
        // 初始化可变参数列表，从 methodID 开始
        va_start(args, methodID);                                           \
        // 调用底层函数的 Call##_jname##MethodV 方法，传递当前对象 this、对象实例 obj、方法 ID methodID 和可变参数列表 args
        result = functions->Call##_jname##MethodV(this, obj, methodID,      \
                    args);                                                  \
        // 结束可变参数列表的使用
        va_end(args);                                                       \
        // 返回调用结果
        return result;                                                      \
    }

#define CALL_TYPE_METHODV(_jtype, _jname)                                   \
    // 定义一个宏，用于调用具有返回类型 _jtype 的 Java 对象方法 _jname，使用可变参数列表
    _jtype Call##_jname##MethodV(jobject obj, jmethodID methodID,           \
        va_list args)                                                       \
    { return functions->Call##_jname##MethodV(this, obj, methodID, args); }  // 直接调用底层函数的对应方法

#define CALL_TYPE_METHODA(_jtype, _jname)                                   \
    // 定义一个宏，用于调用具有返回类型 _jtype 的 Java 对象方法 _jname，使用 jvalue 类型的参数数组
    _jtype Call##_jname##MethodA(jobject obj, jmethodID methodID,           \
                                 const jvalue* args)                        \
    { return functions->Call##_jname##MethodA(this, obj, methodID, args); }  // 直接调用底层函数的对应方法

#define CALL_TYPE(_jtype, _jname)                                           \
    // 定义一个宏，包含三种方式调用 Java 对象方法 _jname：普通、使用可变参数列表、使用 jvalue 参数数组
    CALL_TYPE_METHOD(_jtype, _jname)                                        \
    CALL_TYPE_METHODV(_jtype, _jname)                                       \
    CALL_TYPE_METHODA(_jtype, _jname)

    CALL_TYPE(jobject, Object)                                              // 实例化 CALL_TYPE 宏以处理返回类型为 jobject 的 Object 方法
    CALL_TYPE(jboolean, Boolean)                                            // 实例化 CALL_TYPE 宏以处理返回类型为 jboolean 的 Boolean 方法
    CALL_TYPE(jbyte, Byte)                                                  // 实例化 CALL_TYPE 宏以处理返回类型为 jbyte 的 Byte 方法
    CALL_TYPE(jchar, Char)                                                  // 实例化 CALL_TYPE 宏以处理返回类型为 jchar 的 Char 方法
    CALL_TYPE(jshort, Short)                                                // 实例化 CALL_TYPE 宏以处理返回类型为 jshort 的 Short 方法
    CALL_TYPE(jint, Int)                                                    // 实例化 CALL_TYPE 宏以处理返回类型为 jint 的 Int 方法
    CALL_TYPE(jlong, Long)                                                  // 实例化 CALL_TYPE 宏以处理返回类型为 jlong 的 Long 方法
    CALL_TYPE(jfloat, Float)                                                // 实例化 CALL_TYPE 宏以处理返回类型为 jfloat 的 Float 方法
    CALL_TYPE(jdouble, Double)                                              // 实例化 CALL_TYPE 宏以处理返回类型为 jdouble 的 Double 方法

    void CallVoidMethod(jobject obj, jmethodID methodID, ...)               // 定义一个函数，用于调用没有返回值的 Java 对象方法，支持可变参数列表
    {
        va_list args;                                                       // 声明可变参数列表
        va_start(args, methodID);                                           // 初始化可变参数列表，从 methodID 开始
        functions->CallVoidMethodV(this, obj, methodID, args);              // 调用底层函数的 CallVoidMethodV 方法，传递当前对象 this、对象实例 obj、方法 ID methodID 和可变参数列表 args
        va_end(args);                                                       // 结束可变参数列表的使用
    }

    void CallVoidMethodV(jobject obj, jmethodID methodID, va_list args)     // 定义一个函数，用于调用没有返回值的 Java 对象方法，使用可变参数列表
    { functions->CallVoidMethodV(this, obj, methodID, args); }              // 直接调用底层函数的对应方法

    void CallVoidMethodA(jobject obj, jmethodID methodID, const jvalue* args)// 定义一个函数，用于调用没有返回值的 Java 对象方法，使用 jvalue 参数数组
    { functions->CallVoidMethodA(this, obj, methodID, args); }              // 直接调用底层函数的对应方法

#define CALL_NONVIRT_TYPE_METHOD(_jtype, _jname)                            \
    _jtype CallNonvirtual##_jname##Method(jobject obj, jclass clazz,        \
        jmethodID methodID, ...)                                            \
    // 定义一个宏，用于调用非虚拟 Java 对象方法 _jname
    {                                                                       \
        _jtype result;                                                      \
        // 声明一个变量 result，用于存储函数调用的返回值
        va_list args;                                                       \
        // 声明一个 va_list 类型的变量 args，用于存储可变参数列表
        va_start(args, methodID);                                           \
        // 初始化 args，使其指向 methodID 后的参数
        result = functions->CallNonvirtual##_jname##MethodV(this, obj,      \
                    clazz, methodID, args);                                 \
        // 调用 functions 的 CallNonvirtual##_jname##MethodV 方法，以可变参数列表 args 调用非虚拟方法
        va_end(args);                                                       \
        // 结束使用 args 变量
        return result;                                                      \
        // 返回函数调用的结果 result
    }
# 定义宏，用于生成调用非虚拟方法的函数定义，类型为 _jtype，方法名为 CallNonvirtual_jnameMethodV
#define CALL_NONVIRT_TYPE_METHODV(_jtype, _jname)                           \
    _jtype CallNonvirtual##_jname##MethodV(jobject obj, jclass clazz,       \
        jmethodID methodID, va_list args)                                   \
    { return functions->CallNonvirtual##_jname##MethodV(this, obj, clazz,   \
        methodID, args); }

# 定义宏，用于生成调用非虚拟方法的函数定义，类型为 _jtype，方法名为 CallNonvirtual_jnameMethodA
#define CALL_NONVIRT_TYPE_METHODA(_jtype, _jname)                           \
    _jtype CallNonvirtual##_jname##MethodA(jobject obj, jclass clazz,       \
        jmethodID methodID, const jvalue* args)                             \
    { return functions->CallNonvirtual##_jname##MethodA(this, obj, clazz,   \
        methodID, args); }

# 定义宏，用于生成多个类型的非虚拟方法调用函数
#define CALL_NONVIRT_TYPE(_jtype, _jname)                                   \
    CALL_NONVIRT_TYPE_METHOD(_jtype, _jname)                                \
    CALL_NONVIRT_TYPE_METHODV(_jtype, _jname)                               \
    CALL_NONVIRT_TYPE_METHODA(_jtype, _jname)

# 依次生成多个类型的非虚拟方法调用函数
CALL_NONVIRT_TYPE(jobject, Object)
CALL_NONVIRT_TYPE(jboolean, Boolean)
CALL_NONVIRT_TYPE(jbyte, Byte)
CALL_NONVIRT_TYPE(jchar, Char)
CALL_NONVIRT_TYPE(jshort, Short)
CALL_NONVIRT_TYPE(jint, Int)
CALL_NONVIRT_TYPE(jlong, Long)
CALL_NONVIRT_TYPE(jfloat, Float)
CALL_NONVIRT_TYPE(jdouble, Double)

# 定义调用非虚拟方法的 void 类型函数，支持可变参数列表
void CallNonvirtualVoidMethod(jobject obj, jclass clazz,
    jmethodID methodID, ...)
{
    va_list args;  // 声明一个可变参数列表
    va_start(args, methodID);  // 初始化可变参数列表
    // 调用具体的 void 类型的非虚拟方法调用函数
    functions->CallNonvirtualVoidMethodV(this, obj, clazz, methodID, args);
    va_end(args);  // 结束可变参数列表的使用
}

# 定义调用非虚拟方法的 void 类型函数，支持 va_list 形式的参数列表
void CallNonvirtualVoidMethodV(jobject obj, jclass clazz,
    jmethodID methodID, va_list args)
{
    // 调用具体的 void 类型的非虚拟方法调用函数
    functions->CallNonvirtualVoidMethodV(this, obj, clazz, methodID, args);
}

# 定义获取字段 ID 的函数，返回字段 ID
jfieldID GetFieldID(jclass clazz, const char* name, const char* sig)
{
    return functions->GetFieldID(this, clazz, name, sig);  // 返回字段 ID
}

# 定义获取对象类型字段值的函数，返回 jobject 类型的字段值
jobject GetObjectField(jobject obj, jfieldID fieldID)
{
    return functions->GetObjectField(this, obj, fieldID);  // 返回对象类型字段值
}

# 定义获取 boolean 类型字段值的函数，返回 jboolean 类型的字段值
jboolean GetBooleanField(jobject obj, jfieldID fieldID)
{
    return functions->GetBooleanField(this, obj, fieldID);  // 返回 boolean 类型字段值
}

# 定义获取 byte 类型字段值的函数，返回 jbyte 类型的字段值
jbyte GetByteField(jobject obj, jfieldID fieldID)
{
    return functions->GetByteField(this, obj, fieldID);  // 返回 byte 类型字段值
}

# 定义获取 char 类型字段值的函数，返回 jchar 类型的字段值
jchar GetCharField(jobject obj, jfieldID fieldID)
{
    return functions->GetCharField(this, obj, fieldID);  // 返回 char 类型字段值
}

# 定义获取 short 类型字段值的函数，返回 jshort 类型的字段值
jshort GetShortField(jobject obj, jfieldID fieldID)
{
    return functions->GetShortField(this, obj, fieldID);  // 返回 short 类型字段值
}

# 定义获取 int 类型字段值的函数，返回 jint 类型的字段值
jint GetIntField(jobject obj, jfieldID fieldID)
{
    return functions->GetIntField(this, obj, fieldID);  // 返回 int 类型字段值
}

# 定义获取 long 类型字段值的函数，返回 jlong 类型的字段值
jlong GetLongField(jobject obj, jfieldID fieldID)
{
    return functions->GetLongField(this, obj, fieldID);  // 返回 long 类型字段值
}

# 定义获取 float 类型字段值的函数，返回 jfloat 类型的字段值
jfloat GetFloatField(jobject obj, jfieldID fieldID)
{
    return functions->GetFloatField(this, obj, fieldID);  // 返回 float 类型字段值
}
    // 获取指定对象的双精度字段值
    jdouble GetDoubleField(jobject obj, jfieldID fieldID)
    { return functions->GetDoubleField(this, obj, fieldID); }
    
    // 设置指定对象的对象类型字段值
    void SetObjectField(jobject obj, jfieldID fieldID, jobject value)
    { functions->SetObjectField(this, obj, fieldID, value); }
    
    // 设置指定对象的布尔类型字段值
    void SetBooleanField(jobject obj, jfieldID fieldID, jboolean value)
    { functions->SetBooleanField(this, obj, fieldID, value); }
    
    // 设置指定对象的字节类型字段值
    void SetByteField(jobject obj, jfieldID fieldID, jbyte value)
    { functions->SetByteField(this, obj, fieldID, value); }
    
    // 设置指定对象的字符类型字段值
    void SetCharField(jobject obj, jfieldID fieldID, jchar value)
    { functions->SetCharField(this, obj, fieldID, value); }
    
    // 设置指定对象的短整型字段值
    void SetShortField(jobject obj, jfieldID fieldID, jshort value)
    { functions->SetShortField(this, obj, fieldID, value); }
    
    // 设置指定对象的整型字段值
    void SetIntField(jobject obj, jfieldID fieldID, jint value)
    { functions->SetIntField(this, obj, fieldID, value); }
    
    // 设置指定对象的长整型字段值
    void SetLongField(jobject obj, jfieldID fieldID, jlong value)
    { functions->SetLongField(this, obj, fieldID, value); }
    
    // 设置指定对象的单精度字段值
    void SetFloatField(jobject obj, jfieldID fieldID, jfloat value)
    { functions->SetFloatField(this, obj, fieldID, value); }
    
    // 设置指定对象的双精度字段值
    void SetDoubleField(jobject obj, jfieldID fieldID, jdouble value)
    { functions->SetDoubleField(this, obj, fieldID, value); }
    
    // 获取指定类的静态方法的方法ID
    jmethodID GetStaticMethodID(jclass clazz, const char* name, const char* sig)
    { return functions->GetStaticMethodID(this, clazz, name, sig); }
# 定义宏，用于调用静态方法并返回指定类型的结果
#define CALL_STATIC_TYPE_METHOD(_jtype, _jname)                             \
    _jtype CallStatic##_jname##Method(jclass clazz, jmethodID methodID,     \
        ...)                                                                \
    {                                                                       \
        _jtype result;                                                      \
        va_list args;                                                       \
        va_start(args, methodID);                                           \
        // 调用 JNI 函数 CallStatic##_jname##MethodV 处理可变参数列表并返回结果
        result = functions->CallStatic##_jname##MethodV(this, clazz,        \
                    methodID, args);                                        \
        va_end(args);                                                       \
        return result;                                                      \
    }

# 定义宏，用于调用静态方法并返回指定类型的结果，处理可变参数列表
#define CALL_STATIC_TYPE_METHODV(_jtype, _jname)                            \
    _jtype CallStatic##_jname##MethodV(jclass clazz, jmethodID methodID,    \
        va_list args)                                                       \
    { return functions->CallStatic##_jname##MethodV(this, clazz, methodID,  \
        args); }

# 定义宏，用于调用静态方法并返回指定类型的结果，接受 jvalue 类型参数数组
#define CALL_STATIC_TYPE_METHODA(_jtype, _jname)                            \
    _jtype CallStatic##_jname##MethodA(jclass clazz, jmethodID methodID,    \
                                       const jvalue* args)                  \
    { return functions->CallStatic##_jname##MethodA(this, clazz, methodID,  \
        args); }

# 定义宏，用于组合上述三种调用类型的宏
#define CALL_STATIC_TYPE(_jtype, _jname)                                    \
    CALL_STATIC_TYPE_METHOD(_jtype, _jname)                                 \
    CALL_STATIC_TYPE_METHODV(_jtype, _jname)                                \
    CALL_STATIC_TYPE_METHODA(_jtype, _jname)

// 调用宏，分别生成不同类型和名称的静态方法调用函数
CALL_STATIC_TYPE(jobject, Object)
CALL_STATIC_TYPE(jboolean, Boolean)
CALL_STATIC_TYPE(jbyte, Byte)
CALL_STATIC_TYPE(jchar, Char)
CALL_STATIC_TYPE(jshort, Short)
CALL_STATIC_TYPE(jint, Int)
CALL_STATIC_TYPE(jlong, Long)
CALL_STATIC_TYPE(jfloat, Float)
CALL_STATIC_TYPE(jdouble, Double)

// 调用静态方法，返回值为空
void CallStaticVoidMethod(jclass clazz, jmethodID methodID, ...)
{
    va_list args;
    va_start(args, methodID);
    // 调用 JNI 函数 CallStaticVoidMethodV 处理可变参数列表
    functions->CallStaticVoidMethodV(this, clazz, methodID, args);
    va_end(args);
}

// 调用静态方法，返回值为空，处理可变参数列表
void CallStaticVoidMethodV(jclass clazz, jmethodID methodID, va_list args)
{
    // 调用 JNI 函数 CallStaticVoidMethodV 处理可变参数列表
    functions->CallStaticVoidMethodV(this, clazz, methodID, args);
}

// 获取静态字段的 ID
jfieldID GetStaticFieldID(jclass clazz, const char* name, const char* sig)
{
    // 调用 JNI 函数 GetStaticFieldID 获取静态字段的 ID
    return functions->GetStaticFieldID(this, clazz, name, sig);
}

// 获取静态对象字段
jobject GetStaticObjectField(jclass clazz, jfieldID fieldID)
{
    // 调用 JNI 函数 GetStaticObjectField 获取静态对象字段
    return functions->GetStaticObjectField(this, clazz, fieldID);
}
    // 获取静态 boolean 类型字段的值
    jboolean GetStaticBooleanField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticBooleanField(this, clazz, fieldID); }
    
    // 获取静态 byte 类型字段的值
    jbyte GetStaticByteField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticByteField(this, clazz, fieldID); }
    
    // 获取静态 char 类型字段的值
    jchar GetStaticCharField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticCharField(this, clazz, fieldID); }
    
    // 获取静态 short 类型字段的值
    jshort GetStaticShortField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticShortField(this, clazz, fieldID); }
    
    // 获取静态 int 类型字段的值
    jint GetStaticIntField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticIntField(this, clazz, fieldID); }
    
    // 获取静态 long 类型字段的值
    jlong GetStaticLongField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticLongField(this, clazz, fieldID); }
    
    // 获取静态 float 类型字段的值
    jfloat GetStaticFloatField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticFloatField(this, clazz, fieldID); }
    
    // 获取静态 double 类型字段的值
    jdouble GetStaticDoubleField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticDoubleField(this, clazz, fieldID); }
    
    // 设置静态对象类型字段的值
    void SetStaticObjectField(jclass clazz, jfieldID fieldID, jobject value)
    { functions->SetStaticObjectField(this, clazz, fieldID, value); }
    
    // 设置静态 boolean 类型字段的值
    void SetStaticBooleanField(jclass clazz, jfieldID fieldID, jboolean value)
    { functions->SetStaticBooleanField(this, clazz, fieldID, value); }
    
    // 设置静态 byte 类型字段的值
    void SetStaticByteField(jclass clazz, jfieldID fieldID, jbyte value)
    { functions->SetStaticByteField(this, clazz, fieldID, value); }
    
    // 设置静态 char 类型字段的值
    void SetStaticCharField(jclass clazz, jfieldID fieldID, jchar value)
    { functions->SetStaticCharField(this, clazz, fieldID, value); }
    
    // 设置静态 short 类型字段的值
    void SetStaticShortField(jclass clazz, jfieldID fieldID, jshort value)
    { functions->SetStaticShortField(this, clazz, fieldID, value); }
    
    // 设置静态 int 类型字段的值
    void SetStaticIntField(jclass clazz, jfieldID fieldID, jint value)
    { functions->SetStaticIntField(this, clazz, fieldID, value); }
    
    // 设置静态 long 类型字段的值
    void SetStaticLongField(jclass clazz, jfieldID fieldID, jlong value)
    { functions->SetStaticLongField(this, clazz, fieldID, value); }
    
    // 设置静态 float 类型字段的值
    void SetStaticFloatField(jclass clazz, jfieldID fieldID, jfloat value)
    { functions->SetStaticFloatField(this, clazz, fieldID, value); }
    
    // 设置静态 double 类型字段的值
    void SetStaticDoubleField(jclass clazz, jfieldID fieldID, jdouble value)
    { functions->SetStaticDoubleField(this, clazz, fieldID, value); }
    
    // 根据 unicode 字符数组和长度创建新的 java 字符串
    jstring NewString(const jchar* unicodeChars, jsize len)
    { return functions->NewString(this, unicodeChars, len); }
    
    // 获取 java 字符串的长度
    jsize GetStringLength(jstring string)
    { return functions->GetStringLength(this, string); }
    
    // 获取 java 字符串的字符数组及其是否复制的标志
    const jchar* GetStringChars(jstring string, jboolean* isCopy)
    { return functions->GetStringChars(this, string, isCopy); }
    
    // 释放 java 字符串的字符数组
    void ReleaseStringChars(jstring string, const jchar* chars)
    { functions->ReleaseStringChars(this, string, chars); }
    
    // 根据 UTF-8 编码的字节数组创建新的 java 字符串
    jstring NewStringUTF(const char* bytes)
    { return functions->NewStringUTF(this, bytes); }
    
    // 获取 java 字符串的 UTF-8 编码长度
    jsize GetStringUTFLength(jstring string)
    // 返回字符串的 UTF 编码的长度
    { return functions->GetStringUTFLength(this, string); }
    
    // 获取字符串的 UTF 编码，返回其指针，并标记是否进行了拷贝
    const char* GetStringUTFChars(jstring string, jboolean* isCopy)
    { return functions->GetStringUTFChars(this, string, isCopy); }
    
    // 释放之前通过 GetStringUTFChars 获取的 UTF 编码字符串
    void ReleaseStringUTFChars(jstring string, const char* utf)
    { functions->ReleaseStringUTFChars(this, string, utf); }
    
    // 获取数组的长度
    jsize GetArrayLength(jarray array)
    { return functions->GetArrayLength(this, array); }
    
    // 创建一个新的对象数组，并返回其对象
    jobjectArray NewObjectArray(jsize length, jclass elementClass,
        jobject initialElement)
    { return functions->NewObjectArray(this, length, elementClass,
        initialElement); }
    
    // 获取对象数组中特定索引位置的对象
    jobject GetObjectArrayElement(jobjectArray array, jsize index)
    { return functions->GetObjectArrayElement(this, array, index); }
    
    // 设置对象数组中特定索引位置的对象
    void SetObjectArrayElement(jobjectArray array, jsize index, jobject value)
    { functions->SetObjectArrayElement(this, array, index, value); }
    
    // 创建新的布尔数组，并返回其对象
    jbooleanArray NewBooleanArray(jsize length)
    { return functions->NewBooleanArray(this, length); }
    // 创建新的字节数组，并返回其对象
    jbyteArray NewByteArray(jsize length)
    { return functions->NewByteArray(this, length); }
    // 创建新的字符数组，并返回其对象
    jcharArray NewCharArray(jsize length)
    { return functions->NewCharArray(this, length); }
    // 创建新的短整型数组，并返回其对象
    jshortArray NewShortArray(jsize length)
    { return functions->NewShortArray(this, length); }
    // 创建新的整型数组，并返回其对象
    jintArray NewIntArray(jsize length)
    { return functions->NewIntArray(this, length); }
    // 创建新的长整型数组，并返回其对象
    jlongArray NewLongArray(jsize length)
    { return functions->NewLongArray(this, length); }
    // 创建新的单精度浮点数数组，并返回其对象
    jfloatArray NewFloatArray(jsize length)
    { return functions->NewFloatArray(this, length); }
    // 创建新的双精度浮点数数组，并返回其对象
    jdoubleArray NewDoubleArray(jsize length)
    { return functions->NewDoubleArray(this, length); }
    
    // 获取布尔数组的元素，并返回其指针，同时标记是否进行了拷贝
    jboolean* GetBooleanArrayElements(jbooleanArray array, jboolean* isCopy)
    { return functions->GetBooleanArrayElements(this, array, isCopy); }
    // 获取字节数组的元素，并返回其指针，同时标记是否进行了拷贝
    jbyte* GetByteArrayElements(jbyteArray array, jboolean* isCopy)
    { return functions->GetByteArrayElements(this, array, isCopy); }
    // 获取字符数组的元素，并返回其指针，同时标记是否进行了拷贝
    jchar* GetCharArrayElements(jcharArray array, jboolean* isCopy)
    { return functions->GetCharArrayElements(this, array, isCopy); }
    // 获取短整型数组的元素，并返回其指针，同时标记是否进行了拷贝
    jshort* GetShortArrayElements(jshortArray array, jboolean* isCopy)
    { return functions->GetShortArrayElements(this, array, isCopy); }
    // 获取整型数组的元素，并返回其指针，同时标记是否进行了拷贝
    jint* GetIntArrayElements(jintArray array, jboolean* isCopy)
    { return functions->GetIntArrayElements(this, array, isCopy); }
    // 获取长整型数组的元素，并返回其指针，同时标记是否进行了拷贝
    jlong* GetLongArrayElements(jlongArray array, jboolean* isCopy)
    { return functions->GetLongArrayElements(this, array, isCopy); }
    // 获取单精度浮点数数组的元素，并返回其指针，同时标记是否进行了拷贝
    jfloat* GetFloatArrayElements(jfloatArray array, jboolean* isCopy)
    { return functions->GetFloatArrayElements(this, array, isCopy); }
    // 获取双精度浮点数数组的元素，并返回其指针，同时标记是否进行了拷贝
    jdouble* GetDoubleArrayElements(jdoubleArray array, jboolean* isCopy)
    { return functions->GetDoubleArrayElements(this, array, isCopy); }
    
    // 释放之前通过 GetBoolean/Byte/Char/Short/Int/Long/Float/DoubleArrayElements 获取的数组元素
    void ReleaseBooleanArrayElements(jbooleanArray array, jboolean* elems,
        jint mode)
    { functions->ReleaseBooleanArrayElements(this, array, elems, mode); }
    void ReleaseByteArrayElements(jbyteArray array, jbyte* elems,
        jint mode)
    {
        // 调用 JNI 函数释放 jbyteArray 的元素
        functions->ReleaseByteArrayElements(this, array, elems, mode);
    }
    
    void ReleaseCharArrayElements(jcharArray array, jchar* elems,
        jint mode)
    {
        // 调用 JNI 函数释放 jcharArray 的元素
        functions->ReleaseCharArrayElements(this, array, elems, mode);
    }
    
    void ReleaseShortArrayElements(jshortArray array, jshort* elems,
        jint mode)
    {
        // 调用 JNI 函数释放 jshortArray 的元素
        functions->ReleaseShortArrayElements(this, array, elems, mode);
    }
    
    void ReleaseIntArrayElements(jintArray array, jint* elems,
        jint mode)
    {
        // 调用 JNI 函数释放 jintArray 的元素
        functions->ReleaseIntArrayElements(this, array, elems, mode);
    }
    
    void ReleaseLongArrayElements(jlongArray array, jlong* elems,
        jint mode)
    {
        // 调用 JNI 函数释放 jlongArray 的元素
        functions->ReleaseLongArrayElements(this, array, elems, mode);
    }
    
    void ReleaseFloatArrayElements(jfloatArray array, jfloat* elems,
        jint mode)
    {
        // 调用 JNI 函数释放 jfloatArray 的元素
        functions->ReleaseFloatArrayElements(this, array, elems, mode);
    }
    
    void ReleaseDoubleArrayElements(jdoubleArray array, jdouble* elems,
        jint mode)
    {
        // 调用 JNI 函数释放 jdoubleArray 的元素
        functions->ReleaseDoubleArrayElements(this, array, elems, mode);
    }
    
    void GetBooleanArrayRegion(jbooleanArray array, jsize start, jsize len,
        jboolean* buf)
    {
        // 调用 JNI 函数获取 jbooleanArray 指定区域的数据到 buf 中
        functions->GetBooleanArrayRegion(this, array, start, len, buf);
    }
    
    void GetByteArrayRegion(jbyteArray array, jsize start, jsize len,
        jbyte* buf)
    {
        // 调用 JNI 函数获取 jbyteArray 指定区域的数据到 buf 中
        functions->GetByteArrayRegion(this, array, start, len, buf);
    }
    
    void GetCharArrayRegion(jcharArray array, jsize start, jsize len,
        jchar* buf)
    {
        // 调用 JNI 函数获取 jcharArray 指定区域的数据到 buf 中
        functions->GetCharArrayRegion(this, array, start, len, buf);
    }
    
    void GetShortArrayRegion(jshortArray array, jsize start, jsize len,
        jshort* buf)
    {
        // 调用 JNI 函数获取 jshortArray 指定区域的数据到 buf 中
        functions->GetShortArrayRegion(this, array, start, len, buf);
    }
    
    void GetIntArrayRegion(jintArray array, jsize start, jsize len,
        jint* buf)
    {
        // 调用 JNI 函数获取 jintArray 指定区域的数据到 buf 中
        functions->GetIntArrayRegion(this, array, start, len, buf);
    }
    
    void GetLongArrayRegion(jlongArray array, jsize start, jsize len,
        jlong* buf)
    {
        // 调用 JNI 函数获取 jlongArray 指定区域的数据到 buf 中
        functions->GetLongArrayRegion(this, array, start, len, buf);
    }
    
    void GetFloatArrayRegion(jfloatArray array, jsize start, jsize len,
        jfloat* buf)
    {
        // 调用 JNI 函数获取 jfloatArray 指定区域的数据到 buf 中
        functions->GetFloatArrayRegion(this, array, start, len, buf);
    }
    
    void GetDoubleArrayRegion(jdoubleArray array, jsize start, jsize len,
        jdouble* buf)
    {
        // 调用 JNI 函数获取 jdoubleArray 指定区域的数据到 buf 中
        functions->GetDoubleArrayRegion(this, array, start, len, buf);
    }
    
    void SetBooleanArrayRegion(jbooleanArray array, jsize start, jsize len,
        const jboolean* buf)
    {
        // 调用 JNI 函数设置 jbooleanArray 指定区域的数据为 buf 中的数据
        functions->SetBooleanArrayRegion(this, array, start, len, buf);
    }
    
    void SetByteArrayRegion(jbyteArray array, jsize start, jsize len,
        const jbyte* buf)
    {
        // 调用 JNI 函数设置 jbyteArray 指定区域的数据为 buf 中的数据
        functions->SetByteArrayRegion(this, array, start, len, buf);
    }
    
    void SetCharArrayRegion(jcharArray array, jsize start, jsize len,
        const jchar* buf)
    {
        // 调用 JNI 函数设置 jcharArray 指定区域的数据为 buf 中的数据
        functions->SetCharArrayRegion(this, array, start, len, buf);
    }
    // 设置一个 jshort 数组的指定区域，将 buf 中的数据复制到 array 中
    void SetShortArrayRegion(jshortArray array, jsize start, jsize len,
        const jshort* buf)
    { functions->SetShortArrayRegion(this, array, start, len, buf); }
    
    // 设置一个 jint 数组的指定区域，将 buf 中的数据复制到 array 中
    void SetIntArrayRegion(jintArray array, jsize start, jsize len,
        const jint* buf)
    { functions->SetIntArrayRegion(this, array, start, len, buf); }
    
    // 设置一个 jlong 数组的指定区域，将 buf 中的数据复制到 array 中
    void SetLongArrayRegion(jlongArray array, jsize start, jsize len,
        const jlong* buf)
    { functions->SetLongArrayRegion(this, array, start, len, buf); }
    
    // 设置一个 jfloat 数组的指定区域，将 buf 中的数据复制到 array 中
    void SetFloatArrayRegion(jfloatArray array, jsize start, jsize len,
        const jfloat* buf)
    { functions->SetFloatArrayRegion(this, array, start, len, buf); }
    
    // 设置一个 jdouble 数组的指定区域，将 buf 中的数据复制到 array 中
    void SetDoubleArrayRegion(jdoubleArray array, jsize start, jsize len,
        const jdouble* buf)
    { functions->SetDoubleArrayRegion(this, array, start, len, buf); }
    
    // 注册本地方法，使得 Java 中的类 clazz 能够调用本地方法 methods
    jint RegisterNatives(jclass clazz, const JNINativeMethod* methods,
        jint nMethods)
    { return functions->RegisterNatives(this, clazz, methods, nMethods); }
    
    // 取消注册本地方法，使得 Java 中的类 clazz 无法再调用其本地方法
    jint UnregisterNatives(jclass clazz)
    { return functions->UnregisterNatives(this, clazz); }
    
    // 进入对象 obj 的监视器（synchronized 方法进入时使用）
    jint MonitorEnter(jobject obj)
    { return functions->MonitorEnter(this, obj); }
    
    // 退出对象 obj 的监视器（synchronized 方法退出时使用）
    jint MonitorExit(jobject obj)
    { return functions->MonitorExit(this, obj); }
    
    // 获取当前线程所附属的 Java 虚拟机实例
    jint GetJavaVM(JavaVM** vm)
    { return functions->GetJavaVM(this, vm); }
    
    // 获取字符串 str 中从 start 开始长度为 len 的子串，存入 buf 中
    void GetStringRegion(jstring str, jsize start, jsize len, jchar* buf)
    { functions->GetStringRegion(this, str, start, len, buf); }
    
    // 获取字符串 str 中从 start 开始长度为 len 的 UTF-8 编码子串，存入 buf 中
    void GetStringUTFRegion(jstring str, jsize start, jsize len, char* buf)
    { return functions->GetStringUTFRegion(this, str, start, len, buf); }
    
    // 获取原始数组的临界区，返回其指针，并设置是否拷贝
    void* GetPrimitiveArrayCritical(jarray array, jboolean* isCopy)
    { return functions->GetPrimitiveArrayCritical(this, array, isCopy); }
    
    // 释放原始数组的临界区，结束使用原始数组指针
    void ReleasePrimitiveArrayCritical(jarray array, void* carray, jint mode)
    { functions->ReleasePrimitiveArrayCritical(this, array, carray, mode); }
    
    // 获取字符串的临界区，返回其指针，并设置是否拷贝
    const jchar* GetStringCritical(jstring string, jboolean* isCopy)
    { return functions->GetStringCritical(this, string, isCopy); }
    
    // 释放字符串的临界区，结束使用字符串指针
    void ReleaseStringCritical(jstring string, const jchar* carray)
    { functions->ReleaseStringCritical(this, string, carray); }
    
    // 创建一个对象的弱全局引用，并返回其引用
    jweak NewWeakGlobalRef(jobject obj)
    { return functions->NewWeakGlobalRef(this, obj); }
    
    // 删除一个对象的弱全局引用
    void DeleteWeakGlobalRef(jweak obj)
    { functions->DeleteWeakGlobalRef(this, obj); }
    
    // 检查当前线程是否有未处理的异常
    jboolean ExceptionCheck()
    { return functions->ExceptionCheck(this); }
    
    // 创建一个直接字节缓冲区对象，用于提供本地方法访问原始内存的功能
    jobject NewDirectByteBuffer(void* address, jlong capacity)
    { return functions->NewDirectByteBuffer(this, address, capacity); }
    
    // 获取直接字节缓冲区对象的地址
    void* GetDirectBufferAddress(jobject buf)
    { return functions->GetDirectBufferAddress(this, buf); }
    
    // 获取直接字节缓冲区对象的容量
    jlong GetDirectBufferCapacity(jobject buf)
    { return functions->GetDirectBufferCapacity(this, buf); }
    
    // 获取对象 obj 的引用类型
    jobjectRefType GetObjectRefType(jobject obj)
    { return functions->GetObjectRefType(this, obj); }
/*
 * 结构体定义结束标记，这里是为了确保 C++ 编译器正确处理结构体声明
 */
#endif /*__cplusplus*/
};


/*
 * JNI 调用接口定义。
 */
struct JNIInvokeInterface {
    void*       reserved0;                      // 保留字段0
    void*       reserved1;                      // 保留字段1
    void*       reserved2;                      // 保留字段2

    jint        (*DestroyJavaVM)(JavaVM*);      // 销毁 Java 虚拟机函数指针声明
    jint        (*AttachCurrentThread)(JavaVM*, JNIEnv**, void*);   // 附加当前线程函数指针声明
    jint        (*DetachCurrentThread)(JavaVM*);   // 分离当前线程函数指针声明
    jint        (*GetEnv)(JavaVM*, void**, jint);   // 获取环境函数指针声明
    jint        (*AttachCurrentThreadAsDaemon)(JavaVM*, JNIEnv**, void*);   // 作为守护线程附加当前线程函数指针声明
};

/*
 * C++ 版本的 JavaVM 结构体。
 */
struct _JavaVM {
    const struct JNIInvokeInterface* functions;   // JNI 调用接口指针

#if defined(__cplusplus)
    jint DestroyJavaVM()                         // C++ 中销毁 Java 虚拟机的成员函数定义
    { return functions->DestroyJavaVM(this); }
    jint AttachCurrentThread(JNIEnv** p_env, void* thr_args)    // C++ 中附加当前线程的成员函数定义
    { return functions->AttachCurrentThread(this, p_env, thr_args); }
    jint DetachCurrentThread()                  // C++ 中分离当前线程的成员函数定义
    { return functions->DetachCurrentThread(this); }
    jint GetEnv(void** env, jint version)       // C++ 中获取环境的成员函数定义
    { return functions->GetEnv(this, env, version); }
    jint AttachCurrentThreadAsDaemon(JNIEnv** p_env, void* thr_args)   // C++ 中作为守护线程附加当前线程的成员函数定义
    { return functions->AttachCurrentThreadAsDaemon(this, p_env, thr_args); }
#endif /*__cplusplus*/
};

/*
 * JavaVMAttachArgs 结构体定义，用于附加线程参数。
 */
struct JavaVMAttachArgs {
    jint        version;    /* 必须 >= JNI_VERSION_1_2 的版本号 */
    const char* name;       /* 线程名（修改过的 UTF-8 字符串），可以为 NULL */
    jobject     group;      /* 线程组对象的全局引用，可以为 NULL */
};
typedef struct JavaVMAttachArgs JavaVMAttachArgs;

/*
 * JNI 1.2+ 初始化。从 1.6 版本开始，不再支持之前的结构体版本。
 */
typedef struct JavaVMOption {
    const char* optionString;   // Java 虚拟机选项字符串
    void*       extraInfo;      // 额外信息
} JavaVMOption;

typedef struct JavaVMInitArgs {
    jint        version;        // 使用的 JNI 版本号，必须 >= JNI_VERSION_1_2

    jint        nOptions;       // Java 虚拟机选项的数量
    JavaVMOption* options;      // Java 虚拟机选项数组指针
    jboolean    ignoreUnrecognized;   // 是否忽略未识别的选项
} JavaVMInitArgs;

#ifdef __cplusplus
extern "C" {
#endif
/*
 * VM 初始化函数声明。
 *
 * 注意：这些是 JNI 导出的唯一符号。
 */
jint JNI_GetDefaultJavaVMInitArgs(void*);     // 获取默认的 Java 虚拟机初始化参数
jint JNI_CreateJavaVM(JavaVM**, JNIEnv**, void*);   // 创建 Java 虚拟机
jint JNI_GetCreatedJavaVMs(JavaVM**, jsize, jsize*);   // 获取已创建的 Java 虚拟机数量

#define JNIIMPORT
#define JNIEXPORT  __attribute__ ((visibility ("default")))
#define JNICALL

/*
 * 由可加载共享库导出的函数原型。这些函数由 JNI 调用，而不是由 JNI 提供。
 */
JNIEXPORT jint JNI_OnLoad(JavaVM* vm, void* reserved);    // JNI 加载时调用的函数
JNIEXPORT void JNI_OnUnload(JavaVM* vm, void* reserved);  // JNI 卸载时调用的函数

#ifdef __cplusplus
}
#endif


/*
 * Manifest 常量定义。
 */
#define JNI_FALSE   0       // JNI 常量假
#define JNI_TRUE    1       // JNI 常量真

#define JNI_VERSION_1_1 0x00010001    // JNI 版本号 1.1
#define JNI_VERSION_1_2 0x00010002    // JNI 版本号 1.2
#define JNI_VERSION_1_4 0x00010004    // JNI 版本号 1.4
#define JNI_VERSION_1_6 0x00010006    // JNI 版本号 1.6

#define JNI_OK          (0)         // 没有错误
#define JNI_ERR         (-1)        // 通用错误
#define JNI_EDETACHED   (-2)        // 线程从虚拟机分离
#define JNI_EVERSION    (-3)        // JNI 版本错误
#define JNI_ENOMEM      (-4)        // 内存不足
# 定义 JNI_EEXIST 常量，表示虚拟机已经创建
#define JNI_EEXIST      (-5)        /* VM already created */

# 定义 JNI_EINVAL 常量，表示无效的参数
#define JNI_EINVAL      (-6)        /* Invalid argument */

# 定义 JNI_COMMIT 常量，指示在提交时复制内容，不释放缓冲区
#define JNI_COMMIT      1           /* copy content, do not free buffer */

# 定义 JNI_ABORT 常量，指示在放弃时释放缓冲区而不复制回去
#define JNI_ABORT       2           /* free buffer w/o copying back */

#endif  /* JNI_H_ */
```