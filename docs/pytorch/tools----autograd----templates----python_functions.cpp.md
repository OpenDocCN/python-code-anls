# `.\pytorch\tools\autograd\templates\python_functions.cpp`

```py
// 包含 Torch 自动生成的 Python 函数声明头文件
#include <torch/csrc/autograd/generated/python_functions.h>

// ${generated_comment}

// 包含 Python 标准库头文件
#include <Python.h>
// 包含 ATen 库的头文件
#include <ATen/ATen.h>

// 包含 C10 库的 SymNodeImpl 类定义
#include <c10/core/SymNodeImpl.h>

// 包含 Torch 自动生成的函数声明头文件
#include "torch/csrc/autograd/generated/Functions.h"

// 包含 Torch 自动微分 Python-C++ 函数桥接头文件
#include "torch/csrc/autograd/python_cpp_function.h"

// 包含 Torch 自动微分的 Python 变量封装头文件
#include <torch/csrc/autograd/python_variable.h>

// 包含 Torch 自动微分的保存变量头文件
#include <torch/csrc/autograd/saved_variable.h>

// 包含 Torch 的 Pybind 工具函数头文件
#include <torch/csrc/utils/pybind.h>

// 包含 Pybind11 头文件
#include <pybind11/pybind11.h>

// 再次包含 Torch 的 Pybind 工具函数头文件
#include <torch/csrc/utils/pybind.h>

// NOTE: See [Sharded File] comment in VariableType
// 注意：请查看 VariableType 中的 [Sharded File] 注释

// Torch 自动微分生成命名空间开始
namespace torch::autograd::generated {

// 定义一个模板函数，用于向 Python 模块添加类
template<typename C>
static void addClass(PyObject* module, PyTypeObject& type, const char* name,
  PyGetSetDef* function_properties=NULL, PyMethodDef* function_methods=NULL)
{
  // 调用 _initFunctionPyTypeObject 函数初始化 PyTypeObject 对象
  _initFunctionPyTypeObject(type, name, function_properties, function_methods);
  // 增加对类型对象的引用计数
  Py_INCREF(&type);
  // 将类型对象添加到 Python 模块中
  PyModule_AddObject(module, name, (PyObject*)&type);
  // 注册 C++ 函数到 Python 类型对象
  registerCppFunction(typeid(C), &type);
}

// 插入 Python 函数属性和 getter 函数声明
${py_function_props_and_getters}

// 初始化自动生成的函数，带有分片 ID
void initialize_autogenerated_functions${shard_id}(PyObject* module) {
  // 插入 Python 函数的初始化代码
  ${py_function_initializers}
}

} // namespace torch::autograd::generated
// Torch 自动微分生成命名空间结束
```