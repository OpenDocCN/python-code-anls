# `.\pytorch\.circleci\windows-jni\include\jni.h`

```
/*
 * Copyright (C) 2006 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*
 * JNI specification, as defined by Sun:
 * http://java.sun.com/javase/6/docs/technotes/guides/jni/spec/jniTOC.html
 *
 * Everything here is expected to be VM-neutral.
 */

#ifndef JNI_H_
#define JNI_H_

#include <stdarg.h>
#include <stdint.h>

/* Primitive types that match up with Java equivalents. */
typedef uint8_t  jboolean; /* unsigned 8 bits */
typedef int8_t   jbyte;    /* signed 8 bits */
typedef uint16_t jchar;    /* unsigned 16 bits */
typedef int16_t  jshort;   /* signed 16 bits */
typedef int32_t  jint;     /* signed 32 bits */
typedef int64_t  jlong;    /* signed 64 bits */
typedef float    jfloat;   /* 32-bit IEEE 754 */
typedef double   jdouble;  /* 64-bit IEEE 754 */

/* "cardinal indices and sizes" */
typedef jint     jsize;

#ifdef __cplusplus
/*
 * Reference types, in C++
 */
class _jobject {}; // 定义一个空的基类 _jobject
class _jclass : public _jobject {}; // _jclass 类继承自 _jobject 类
class _jstring : public _jobject {}; // _jstring 类继承自 _jobject 类
class _jarray : public _jobject {}; // _jarray 类继承自 _jobject 类
class _jobjectArray : public _jarray {}; // _jobjectArray 类继承自 _jarray 类
class _jbooleanArray : public _jarray {}; // _jbooleanArray 类继承自 _jarray 类
class _jbyteArray : public _jarray {}; // _jbyteArray 类继承自 _jarray 类
class _jcharArray : public _jarray {}; // _jcharArray 类继承自 _jarray 类
class _jshortArray : public _jarray {}; // _jshortArray 类继承自 _jarray 类
class _jintArray : public _jarray {}; // _jintArray 类继承自 _jarray 类
class _jlongArray : public _jarray {}; // _jlongArray 类继承自 _jarray 类
class _jfloatArray : public _jarray {}; // _jfloatArray 类继承自 _jarray 类
class _jdoubleArray : public _jarray {}; // _jdoubleArray 类继承自 _jarray 类
class _jthrowable : public _jobject {}; // _jthrowable 类继承自 _jobject 类

typedef _jobject*       jobject; // 定义 jobject 为 _jobject* 类型的别名
typedef _jclass*        jclass; // 定义 jclass 为 _jclass* 类型的别名
typedef _jstring*       jstring; // 定义 jstring 为 _jstring* 类型的别名
typedef _jarray*        jarray; // 定义 jarray 为 _jarray* 类型的别名
typedef _jobjectArray*  jobjectArray; // 定义 jobjectArray 为 _jobjectArray* 类型的别名
typedef _jbooleanArray* jbooleanArray; // 定义 jbooleanArray 为 _jbooleanArray* 类型的别名
typedef _jbyteArray*    jbyteArray; // 定义 jbyteArray 为 _jbyteArray* 类型的别名
typedef _jcharArray*    jcharArray; // 定义 jcharArray 为 _jcharArray* 类型的别名
typedef _jshortArray*   jshortArray; // 定义 jshortArray 为 _jshortArray* 类型的别名
typedef _jintArray*     jintArray; // 定义 jintArray 为 _jintArray* 类型的别名
typedef _jlongArray*    jlongArray; // 定义 jlongArray 为 _jlongArray* 类型的别名
typedef _jfloatArray*   jfloatArray; // 定义 jfloatArray 为 _jfloatArray* 类型的别名
typedef _jdoubleArray*  jdoubleArray; // 定义 jdoubleArray 为 _jdoubleArray* 类型的别名
typedef _jthrowable*    jthrowable; // 定义 jthrowable 为 _jthrowable* 类型的别名
typedef _jobject*       jweak; // 定义 jweak 为 _jobject* 类型的别名

#else /* not __cplusplus */

/*
 * Reference types, in C.
 */
typedef void*           jobject; // 定义 jobject 为 void* 类型的别名
typedef jobject         jclass; // 定义 jclass 为 jobject 类型的别名
typedef jobject         jstring; // 定义 jstring 为 jobject 类型的别名
typedef jobject         jarray; // 定义 jarray 为 jobject 类型的别名
typedef jarray          jobjectArray; // 定义 jobjectArray 为 jarray 类型的别名
typedef jarray          jbooleanArray; // 定义 jbooleanArray 为 jarray 类型的别名
typedef jarray          jbyteArray; // 定义 jbyteArray 为 jarray 类型的别名
typedef jarray          jcharArray; // 定义 jcharArray 为 jarray 类型的别名
typedef jarray          jshortArray; // 定义 jshortArray 为 jarray 类型的别名
typedef jarray          jintArray; // 定义 jintArray 为 jarray 类型的别名
typedef jarray          jlongArray; // 定义 jlongArray 为 jarray 类型的别名
typedef jarray          jfloatArray; // 定义 jfloatArray 为 jarray 类型的别名
typedef jarray          jdoubleArray;
typedef jobject         jthrowable;
typedef jobject         jweak;

#endif /* not __cplusplus */

struct _jfieldID;                       /* opaque structure */
typedef struct _jfieldID* jfieldID;     /* field IDs */

struct _jmethodID;                      /* opaque structure */
typedef struct _jmethodID* jmethodID;   /* method IDs */

struct JNIInvokeInterface;

typedef union jvalue {
    jboolean    z;                      // 布尔类型
    jbyte       b;                      // 字节类型
    jchar       c;                      // 字符类型
    jshort      s;                      // 短整型
    jint        i;                      // 整型
    jlong       j;                      // 长整型
    jfloat      f;                      // 浮点型
    jdouble     d;                      // 双精度浮点型
    jobject     l;                      // 对象类型
} jvalue;                               // JNI 中的基本数据类型

typedef enum jobjectRefType {
    JNIInvalidRefType = 0,              // 无效引用类型
    JNILocalRefType = 1,                // 局部引用类型
    JNIGlobalRefType = 2,               // 全局引用类型
    JNIWeakGlobalRefType = 3            // 弱全局引用类型
} jobjectRefType;                       // JNI 引用类型枚举

typedef struct {
    const char* name;                   // 方法名
    const char* signature;              // 方法签名
    void*       fnPtr;                  // 函数指针
} JNINativeMethod;                      // JNI 本地方法结构体

struct _JNIEnv;
struct _JavaVM;
typedef const struct JNINativeInterface* C_JNIEnv;

#if defined(__cplusplus)
typedef _JNIEnv JNIEnv;                 // JNI 环境
typedef _JavaVM JavaVM;                 // Java 虚拟机
#else
typedef const struct JNINativeInterface* JNIEnv;  // JNI 环境
typedef const struct JNIInvokeInterface* JavaVM;  // Java 虚拟机
#endif

/*
 * Table of interface function pointers.
 */
struct JNINativeInterface {
    void*       reserved0;              // 保留字段0
    void*       reserved1;              // 保留字段1
    void*       reserved2;              // 保留字段2
    void*       reserved3;              // 保留字段3

    jint        (*GetVersion)(JNIEnv *);             // 获取 JNI 版本

    jclass      (*DefineClass)(JNIEnv*, const char*, jobject, const jbyte*, jsize);
    // 定义类

    jclass      (*FindClass)(JNIEnv*, const char*);  // 查找类

    jmethodID   (*FromReflectedMethod)(JNIEnv*, jobject);
    // 从反射方法获取方法 ID

    jfieldID    (*FromReflectedField)(JNIEnv*, jobject);
    // 从反射字段获取字段 ID

    /* spec doesn't show jboolean parameter */
    jobject     (*ToReflectedMethod)(JNIEnv*, jclass, jmethodID, jboolean);
    // 转换为反射方法

    jclass      (*GetSuperclass)(JNIEnv*, jclass);
    // 获取父类

    jboolean    (*IsAssignableFrom)(JNIEnv*, jclass, jclass);
    // 判断是否可以赋值

    /* spec doesn't show jboolean parameter */
    jobject     (*ToReflectedField)(JNIEnv*, jclass, jfieldID, jboolean);
    // 转换为反射字段

    jint        (*Throw)(JNIEnv*, jthrowable);
    // 抛出异常

    jint        (*ThrowNew)(JNIEnv *, jclass, const char *);
    // 抛出新异常

    jthrowable  (*ExceptionOccurred)(JNIEnv*);
    // 获取当前异常

    void        (*ExceptionDescribe)(JNIEnv*);
    // 描述异常

    void        (*ExceptionClear)(JNIEnv*);
    // 清除异常

    void        (*FatalError)(JNIEnv*, const char*);
    // 致命错误处理

    jint        (*PushLocalFrame)(JNIEnv*, jint);
    // 压入局部帧

    jobject     (*PopLocalFrame)(JNIEnv*, jobject);
    // 弹出局部帧

    jobject     (*NewGlobalRef)(JNIEnv*, jobject);
    // 创建全局引用

    void        (*DeleteGlobalRef)(JNIEnv*, jobject);
    // 删除全局引用

    void        (*DeleteLocalRef)(JNIEnv*, jobject);
    // 删除局部引用

    jboolean    (*IsSameObject)(JNIEnv*, jobject, jobject);
    // 判断两个对象是否相同

    jobject     (*NewLocalRef)(JNIEnv*, jobject);
    // 创建局部引用

    jint        (*EnsureLocalCapacity)(JNIEnv*, jint);
    // 确保局部容量

    jobject     (*AllocObject)(JNIEnv*, jclass);
    // 分配对象

    jobject     (*NewObject)(JNIEnv*, jclass, jmethodID, ...);
    // 创建对象

    jobject     (*NewObjectV)(JNIEnv*, jclass, jmethodID, va_list);
    // 创建对象，可变参数列表

    jobject     (*NewObjectA)(JNIEnv*, jclass, jmethodID, jvalue*);
    // 创建对象，数组参数
    // 获取对象的类对象
    jclass      (*GetObjectClass)(JNIEnv*, jobject);
    // 检查对象是否是给定类的实例
    jboolean    (*IsInstanceOf)(JNIEnv*, jobject, jclass);
    // 获取指定方法的方法ID

    jmethodID   (*GetMethodID)(JNIEnv*, jclass, const char*, const char*);

    // 调用返回对象的方法，带可变参数列表
    jobject     (*CallObjectMethod)(JNIEnv*, jobject, jmethodID, ...);
    // 调用返回对象的方法，带va_list参数
    jobject     (*CallObjectMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    // 调用返回对象的方法，带jvalue数组参数
    jobject     (*CallObjectMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    // 调用返回布尔值的方法，带可变参数列表
    jboolean    (*CallBooleanMethod)(JNIEnv*, jobject, jmethodID, ...);
    // 调用返回布尔值的方法，带va_list参数
    jboolean    (*CallBooleanMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    // 调用返回布尔值的方法，带jvalue数组参数
    jboolean    (*CallBooleanMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    // 调用返回字节值的方法，带可变参数列表
    jbyte       (*CallByteMethod)(JNIEnv*, jobject, jmethodID, ...);
    // 调用返回字节值的方法，带va_list参数
    jbyte       (*CallByteMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    // 调用返回字节值的方法，带jvalue数组参数
    jbyte       (*CallByteMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    // 调用返回字符值的方法，带可变参数列表
    jchar       (*CallCharMethod)(JNIEnv*, jobject, jmethodID, ...);
    // 调用返回字符值的方法，带va_list参数
    jchar       (*CallCharMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    // 调用返回字符值的方法，带jvalue数组参数
    jchar       (*CallCharMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    // 调用返回短整数值的方法，带可变参数列表
    jshort      (*CallShortMethod)(JNIEnv*, jobject, jmethodID, ...);
    // 调用返回短整数值的方法，带va_list参数
    jshort      (*CallShortMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    // 调用返回短整数值的方法，带jvalue数组参数
    jshort      (*CallShortMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    // 调用返回整数值的方法，带可变参数列表
    jint        (*CallIntMethod)(JNIEnv*, jobject, jmethodID, ...);
    // 调用返回整数值的方法，带va_list参数
    jint        (*CallIntMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    // 调用返回整数值的方法，带jvalue数组参数
    jint        (*CallIntMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    // 调用返回长整数值的方法，带可变参数列表
    jlong       (*CallLongMethod)(JNIEnv*, jobject, jmethodID, ...);
    // 调用返回长整数值的方法，带va_list参数
    jlong       (*CallLongMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    // 调用返回长整数值的方法，带jvalue数组参数
    jlong       (*CallLongMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    // 调用返回浮点数值的方法，带可变参数列表
    jfloat      (*CallFloatMethod)(JNIEnv*, jobject, jmethodID, ...);
    // 调用返回浮点数值的方法，带va_list参数
    jfloat      (*CallFloatMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    // 调用返回浮点数值的方法，带jvalue数组参数
    jfloat      (*CallFloatMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    // 调用返回双精度数值的方法，带可变参数列表
    jdouble     (*CallDoubleMethod)(JNIEnv*, jobject, jmethodID, ...);
    // 调用返回双精度数值的方法，带va_list参数
    jdouble     (*CallDoubleMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    // 调用返回双精度数值的方法，带jvalue数组参数
    jdouble     (*CallDoubleMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    // 调用返回void的方法，带可变参数列表
    void        (*CallVoidMethod)(JNIEnv*, jobject, jmethodID, ...);
    // 调用返回void的方法，带va_list参数
    void        (*CallVoidMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    // 调用返回void的方法，带jvalue数组参数
    void        (*CallVoidMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);

    // 调用非虚方法返回对象的方法，带可变参数列表
    jobject     (*CallNonvirtualObjectMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    // 调用非虚方法返回对象的方法，带va_list参数
    jobject     (*CallNonvirtualObjectMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    // 调用非虚方法返回对象的方法，带jvalue数组参数
    jobject     (*CallNonvirtualObjectMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, jvalue*);
    // 调用非虚方法返回布尔值的方法，带可变参数列表
    jboolean    (*CallNonvirtualBooleanMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    // 调用非虚方法返回布尔值的方法，带va_list参数
    jboolean    (*CallNonvirtualBooleanMethodV)(JNIEnv*, jobject, jclass,
                         jmethodID, va_list);
    jboolean    (*CallNonvirtualBooleanMethodA)(JNIEnv*, jobject, jclass,
                         jmethodID, jvalue*);
    # 声明一个函数指针 CallNonvirtualBooleanMethodA，用于调用非虚拟的布尔类型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 jvalue* 参数

    jbyte       (*CallNonvirtualByteMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    # 声明一个函数指针 CallNonvirtualByteMethod，用于调用非虚拟的字节类型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和可变参数 (...) 参数

    jbyte       (*CallNonvirtualByteMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    # 声明一个函数指针 CallNonvirtualByteMethodV，用于调用非虚拟的字节类型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 va_list 参数

    jbyte       (*CallNonvirtualByteMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, jvalue*);
    # 声明一个函数指针 CallNonvirtualByteMethodA，用于调用非虚拟的字节类型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 jvalue* 参数

    jchar       (*CallNonvirtualCharMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    # 声明一个函数指针 CallNonvirtualCharMethod，用于调用非虚拟的字符类型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和可变参数 (...) 参数

    jchar       (*CallNonvirtualCharMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    # 声明一个函数指针 CallNonvirtualCharMethodV，用于调用非虚拟的字符类型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 va_list 参数

    jchar       (*CallNonvirtualCharMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, jvalue*);
    # 声明一个函数指针 CallNonvirtualCharMethodA，用于调用非虚拟的字符类型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 jvalue* 参数

    jshort      (*CallNonvirtualShortMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    # 声明一个函数指针 CallNonvirtualShortMethod，用于调用非虚拟的短整型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和可变参数 (...) 参数

    jshort      (*CallNonvirtualShortMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    # 声明一个函数指针 CallNonvirtualShortMethodV，用于调用非虚拟的短整型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 va_list 参数

    jshort      (*CallNonvirtualShortMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, jvalue*);
    # 声明一个函数指针 CallNonvirtualShortMethodA，用于调用非虚拟的短整型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 jvalue* 参数

    jint        (*CallNonvirtualIntMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    # 声明一个函数指针 CallNonvirtualIntMethod，用于调用非虚拟的整型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和可变参数 (...) 参数

    jint        (*CallNonvirtualIntMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    # 声明一个函数指针 CallNonvirtualIntMethodV，用于调用非虚拟的整型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 va_list 参数

    jint        (*CallNonvirtualIntMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, jvalue*);
    # 声明一个函数指针 CallNonvirtualIntMethodA，用于调用非虚拟的整型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 jvalue* 参数

    jlong       (*CallNonvirtualLongMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    # 声明一个函数指针 CallNonvirtualLongMethod，用于调用非虚拟的长整型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和可变参数 (...) 参数

    jlong       (*CallNonvirtualLongMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    # 声明一个函数指针 CallNonvirtualLongMethodV，用于调用非虚拟的长整型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 va_list 参数

    jlong       (*CallNonvirtualLongMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, jvalue*);
    # 声明一个函数指针 CallNonvirtualLongMethodA，用于调用非虚拟的长整型方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 jvalue* 参数

    jfloat      (*CallNonvirtualFloatMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    # 声明一个函数指针 CallNonvirtualFloatMethod，用于调用非虚拟的浮点数方法，接受 JNIEnv*、jobject、jclass、jmethodID 和可变参数 (...) 参数

    jfloat      (*CallNonvirtualFloatMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    # 声明一个函数指针 CallNonvirtualFloatMethodV，用于调用非虚拟的浮点数方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 va_list 参数

    jfloat      (*CallNonvirtualFloatMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, jvalue*);
    # 声明一个函数指针 CallNonvirtualFloatMethodA，用于调用非虚拟的浮点数方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 jvalue* 参数

    jdouble     (*CallNonvirtualDoubleMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    # 声明一个函数指针 CallNonvirtualDoubleMethod，用于调用非虚拟的双精度浮点数方法，接受 JNIEnv*、jobject、jclass、jmethodID 和可变参数 (...) 参数

    jdouble     (*CallNonvirtualDoubleMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    # 声明一个函数指针 CallNonvirtualDoubleMethodV，用于调用非虚拟的双精度浮点数方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 va_list 参数

    jdouble     (*CallNonvirtualDoubleMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, jvalue*);
    # 声明一个函数指针 CallNonvirtualDoubleMethodA，用于调用非虚拟的双精度浮点数方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 jvalue* 参数

    void        (*CallNonvirtualVoidMethod)(JNIEnv*, jobject, jclass,
                        jmethodID, ...);
    # 声明一个函数指针 CallNonvirtualVoidMethod，用于调用非虚拟的无返回值方法，接受 JNIEnv*、jobject、jclass、jmethodID 和可变参数 (...) 参数

    void        (*CallNonvirtualVoidMethodV)(JNIEnv*, jobject, jclass,
                        jmethodID, va_list);
    # 声明一个函数指针 CallNonvirtualVoidMethodV，用于调用非虚拟的无返回值方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 va_list 参数

    void        (*CallNonvirtualVoidMethodA)(JNIEnv*, jobject, jclass,
                        jmethodID, jvalue*);
    # 声明一个函数指针 CallNonvirtualVoidMethodA，用于调用非虚拟的无返回值方法，接受 JNIEnv*、jobject、jclass、jmethodID 和 jvalue* 参数

    jfieldID    (*GetFieldID)(JNIEnv*, jclass, const char*, const char*);
    # 声明一个函数指针 GetFieldID，用于获取指定类中指定字段的 ID，接受 JNIEnv*、jclass、
    # 定义函数指针，用于获取对象字段的值
    jobject     (*GetObjectField)(JNIEnv*, jobject, jfieldID);
    # 定义函数指针，用于获取布尔字段的值
    jboolean    (*GetBooleanField)(JNIEnv*, jobject, jfieldID);
    # 定义函数指针，用于获取字节字段的值
    jbyte       (*GetByteField)(JNIEnv*, jobject, jfieldID);
    # 定义函数指针，用于获取字符字段的值
    jchar       (*GetCharField)(JNIEnv*, jobject, jfieldID);
    # 定义函数指针，用于获取短整数字段的值
    jshort      (*GetShortField)(JNIEnv*, jobject, jfieldID);
    # 定义函数指针，用于获取整数字段的值
    jint        (*GetIntField)(JNIEnv*, jobject, jfieldID);
    # 定义函数指针，用于获取长整数字段的值
    jlong       (*GetLongField)(JNIEnv*, jobject, jfieldID);
    # 定义函数指针，用于获取浮点数字段的值
    jfloat      (*GetFloatField)(JNIEnv*, jobject, jfieldID);
    # 定义函数指针，用于获取双精度浮点数字段的值
    jdouble     (*GetDoubleField)(JNIEnv*, jobject, jfieldID);

    # 定义函数指针，用于设置对象字段的值
    void        (*SetObjectField)(JNIEnv*, jobject, jfieldID, jobject);
    # 定义函数指针，用于设置布尔字段的值
    void        (*SetBooleanField)(JNIEnv*, jobject, jfieldID, jboolean);
    # 定义函数指针，用于设置字节字段的值
    void        (*SetByteField)(JNIEnv*, jobject, jfieldID, jbyte);
    # 定义函数指针，用于设置字符字段的值
    void        (*SetCharField)(JNIEnv*, jobject, jfieldID, jchar);
    # 定义函数指针，用于设置短整数字段的值
    void        (*SetShortField)(JNIEnv*, jobject, jfieldID, jshort);
    # 定义函数指针，用于设置整数字段的值
    void        (*SetIntField)(JNIEnv*, jobject, jfieldID, jint);
    # 定义函数指针，用于设置长整数字段的值
    void        (*SetLongField)(JNIEnv*, jobject, jfieldID, jlong);
    # 定义函数指针，用于设置浮点数字段的值
    void        (*SetFloatField)(JNIEnv*, jobject, jfieldID, jfloat);
    # 定义函数指针，用于设置双精度浮点数字段的值
    void        (*SetDoubleField)(JNIEnv*, jobject, jfieldID, jdouble);

    # 定义函数指针，用于获取静态方法的 ID
    jmethodID   (*GetStaticMethodID)(JNIEnv*, jclass, const char*, const char*);

    # 定义函数指针，用于调用静态方法并返回对象
    jobject     (*CallStaticObjectMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 定义函数指针，用于以 va_list 形式调用静态方法并返回对象
    jobject     (*CallStaticObjectMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 定义函数指针，用于以 jvalue* 数组形式调用静态方法并返回对象
    jobject     (*CallStaticObjectMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);

    # 定义函数指针，用于调用静态方法并返回布尔值
    jboolean    (*CallStaticBooleanMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 定义函数指针，用于以 va_list 形式调用静态方法并返回布尔值
    jboolean    (*CallStaticBooleanMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 定义函数指针，用于以 jvalue* 数组形式调用静态方法并返回布尔值
    jboolean    (*CallStaticBooleanMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);

    # 定义函数指针，用于调用静态方法并返回字节值
    jbyte       (*CallStaticByteMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 定义函数指针，用于以 va_list 形式调用静态方法并返回字节值
    jbyte       (*CallStaticByteMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 定义函数指针，用于以 jvalue* 数组形式调用静态方法并返回字节值
    jbyte       (*CallStaticByteMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);

    # 定义函数指针，用于调用静态方法并返回字符值
    jchar       (*CallStaticCharMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 定义函数指针，用于以 va_list 形式调用静态方法并返回字符值
    jchar       (*CallStaticCharMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 定义函数指针，用于以 jvalue* 数组形式调用静态方法并返回字符值
    jchar       (*CallStaticCharMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);

    # 定义函数指针，用于调用静态方法并返回短整数值
    jshort      (*CallStaticShortMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 定义函数指针，用于以 va_list 形式调用静态方法并返回短整数值
    jshort      (*CallStaticShortMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 定义函数指针，用于以 jvalue* 数组形式调用静态方法并返回短整数值
    jshort      (*CallStaticShortMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);

    # 定义函数指针，用于调用静态方法并返回整数值
    jint        (*CallStaticIntMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 定义函数指针，用于以 va_list 形式调用静态方法并返回整数值
    jint        (*CallStaticIntMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 定义函数指针，用于以 jvalue* 数组形式调用静态方法并返回整数值
    jint        (*CallStaticIntMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);

    # 定义函数指针，用于调用静态方法并返回长整数值
    jlong       (*CallStaticLongMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 定义函数指针，用于以 va_list 形式调用静态方法并返回长整数值
    jlong       (*CallStaticLongMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 定义函数指针，用于以 jvalue* 数组形式调用静态方法并返回长整数值
    jlong       (*CallStaticLongMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);
    # 声明函数指针，用于调用静态方法并返回浮点数
    jfloat      (*CallStaticFloatMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 声明函数指针，用于调用静态方法并返回浮点数，带有可变参数列表
    jfloat      (*CallStaticFloatMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 声明函数指针，用于调用静态方法并返回浮点数，带有 jvalue 数组参数
    jfloat      (*CallStaticFloatMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);
    # 声明函数指针，用于调用静态方法并返回双精度浮点数
    jdouble     (*CallStaticDoubleMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 声明函数指针，用于调用静态方法并返回双精度浮点数，带有可变参数列表
    jdouble     (*CallStaticDoubleMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 声明函数指针，用于调用静态方法并返回双精度浮点数，带有 jvalue 数组参数
    jdouble     (*CallStaticDoubleMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);
    # 声明函数指针，用于调用静态方法且无返回值
    void        (*CallStaticVoidMethod)(JNIEnv*, jclass, jmethodID, ...);
    # 声明函数指针，用于调用静态方法且无返回值，带有可变参数列表
    void        (*CallStaticVoidMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    # 声明函数指针，用于调用静态方法且无返回值，带有 jvalue 数组参数
    void        (*CallStaticVoidMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);

    # 声明函数指针，用于获取静态字段的 ID
    jfieldID    (*GetStaticFieldID)(JNIEnv*, jclass, const char*, const char*);

    # 声明函数指针，用于获取静态对象字段的值
    jobject     (*GetStaticObjectField)(JNIEnv*, jclass, jfieldID);
    # 声明函数指针，用于获取静态布尔字段的值
    jboolean    (*GetStaticBooleanField)(JNIEnv*, jclass, jfieldID);
    # 声明函数指针，用于获取静态字节字段的值
    jbyte       (*GetStaticByteField)(JNIEnv*, jclass, jfieldID);
    # 声明函数指针，用于获取静态字符字段的值
    jchar       (*GetStaticCharField)(JNIEnv*, jclass, jfieldID);
    # 声明函数指针，用于获取静态短整型字段的值
    jshort      (*GetStaticShortField)(JNIEnv*, jclass, jfieldID);
    # 声明函数指针，用于获取静态整型字段的值
    jint        (*GetStaticIntField)(JNIEnv*, jclass, jfieldID);
    # 声明函数指针，用于获取静态长整型字段的值
    jlong       (*GetStaticLongField)(JNIEnv*, jclass, jfieldID);
    # 声明函数指针，用于获取静态浮点数字段的值
    jfloat      (*GetStaticFloatField)(JNIEnv*, jclass, jfieldID);
    # 声明函数指针，用于获取静态双精度浮点数字段的值
    jdouble     (*GetStaticDoubleField)(JNIEnv*, jclass, jfieldID);

    # 声明函数指针，用于设置静态对象字段的值
    void        (*SetStaticObjectField)(JNIEnv*, jclass, jfieldID, jobject);
    # 声明函数指针，用于设置静态布尔字段的值
    void        (*SetStaticBooleanField)(JNIEnv*, jclass, jfieldID, jboolean);
    # 声明函数指针，用于设置静态字节字段的值
    void        (*SetStaticByteField)(JNIEnv*, jclass, jfieldID, jbyte);
    # 声明函数指针，用于设置静态字符字段的值
    void        (*SetStaticCharField)(JNIEnv*, jclass, jfieldID, jchar);
    # 声明函数指针，用于设置静态短整型字段的值
    void        (*SetStaticShortField)(JNIEnv*, jclass, jfieldID, jshort);
    # 声明函数指针，用于设置静态整型字段的值
    void        (*SetStaticIntField)(JNIEnv*, jclass, jfieldID, jint);
    # 声明函数指针，用于设置静态长整型字段的值
    void        (*SetStaticLongField)(JNIEnv*, jclass, jfieldID, jlong);
    # 声明函数指针，用于设置静态浮点数字段的值
    void        (*SetStaticFloatField)(JNIEnv*, jclass, jfieldID, jfloat);
    # 声明函数指针，用于设置静态双精度浮点数字段的值
    void        (*SetStaticDoubleField)(JNIEnv*, jclass, jfieldID, jdouble);

    # 声明函数指针，用于创建 Java 字符串对象
    jstring     (*NewString)(JNIEnv*, const jchar*, jsize);
    # 声明函数指针，用于获取 Java 字符串对象的长度
    jsize       (*GetStringLength)(JNIEnv*, jstring);
    # 声明函数指针，用于获取 Java 字符串对象的字符数组
    const jchar* (*GetStringChars)(JNIEnv*, jstring, jboolean*);
    # 声明函数指针，用于释放 Java 字符串对象的字符数组
    void        (*ReleaseStringChars)(JNIEnv*, jstring, const jchar*);
    # 声明函数指针，用于创建 UTF-8 编码的 Java 字符串对象
    jstring     (*NewStringUTF)(JNIEnv*, const char*);
    # 声明函数指针，用于获取 UTF-8 编码的 Java 字符串对象的长度
    jsize       (*GetStringUTFLength)(JNIEnv*, jstring);
    # 声明函数指针，用于获取 UTF-8 编码的 Java 字符串对象的字符数组
    const char* (*GetStringUTFChars)(JNIEnv*, jstring, jboolean*);
    # 声明函数指针，用于释放 UTF-8 编码的 Java 字符串对象的字符数组
    void        (*ReleaseStringUTFChars)(JNIEnv*, jstring, const char*);

    # 声明函数指针，用于获取数组对象的长度
    jsize       (*GetArrayLength)(JNIEnv*, jarray);
    # 声明函数指针，用于创建对象数组
    jobjectArray (*NewObjectArray)(JNIEnv*, jsize, jclass, jobject);
    # 声明函数指针，用于获取对象数组的元素
    jobject     (*GetObjectArrayElement)(JNIEnv*, jobjectArray, jsize);
    # 声明函数指针，用于设置对象数组的元素
    void        (*SetObjectArrayElement)(JNIEnv*, jobjectArray, jsize, jobject);

    # 声明函数指针，用于创建布尔数组
    jbooleanArray (*NewBooleanArray)(JNIEnv*, jsize);
    // 声明函数指针，用于创建不同类型的原生数组
    jbyteArray    (*NewByteArray)(JNIEnv*, jsize);
    jcharArray    (*NewCharArray)(JNIEnv*, jsize);
    jshortArray   (*NewShortArray)(JNIEnv*, jsize);
    jintArray     (*NewIntArray)(JNIEnv*, jsize);
    jlongArray    (*NewLongArray)(JNIEnv*, jsize);
    jfloatArray   (*NewFloatArray)(JNIEnv*, jsize);
    jdoubleArray  (*NewDoubleArray)(JNIEnv*, jsize);

    // 获取原生布尔数组的元素，并返回指向数组数据的指针
    jboolean*   (*GetBooleanArrayElements)(JNIEnv*, jbooleanArray, jboolean*);
    // 获取原生字节数组的元素，并返回指向数组数据的指针
    jbyte*      (*GetByteArrayElements)(JNIEnv*, jbyteArray, jboolean*);
    // 获取原生字符数组的元素，并返回指向数组数据的指针
    jchar*      (*GetCharArrayElements)(JNIEnv*, jcharArray, jboolean*);
    // 获取原生短整型数组的元素，并返回指向数组数据的指针
    jshort*     (*GetShortArrayElements)(JNIEnv*, jshortArray, jboolean*);
    // 获取原生整型数组的元素，并返回指向数组数据的指针
    jint*       (*GetIntArrayElements)(JNIEnv*, jintArray, jboolean*);
    // 获取原生长整型数组的元素，并返回指向数组数据的指针
    jlong*      (*GetLongArrayElements)(JNIEnv*, jlongArray, jboolean*);
    // 获取原生浮点型数组的元素，并返回指向数组数据的指针
    jfloat*     (*GetFloatArrayElements)(JNIEnv*, jfloatArray, jboolean*);
    // 获取原生双精度浮点型数组的元素，并返回指向数组数据的指针
    jdouble*    (*GetDoubleArrayElements)(JNIEnv*, jdoubleArray, jboolean*);

    // 释放原生布尔数组的元素，可能复制数据回Java数组
    void        (*ReleaseBooleanArrayElements)(JNIEnv*, jbooleanArray,
                        jboolean*, jint);
    // 释放原生字节数组的元素，可能复制数据回Java数组
    void        (*ReleaseByteArrayElements)(JNIEnv*, jbyteArray,
                        jbyte*, jint);
    // 释放原生字符数组的元素，可能复制数据回Java数组
    void        (*ReleaseCharArrayElements)(JNIEnv*, jcharArray,
                        jchar*, jint);
    // 释放原生短整型数组的元素，可能复制数据回Java数组
    void        (*ReleaseShortArrayElements)(JNIEnv*, jshortArray,
                        jshort*, jint);
    // 释放原生整型数组的元素，可能复制数据回Java数组
    void        (*ReleaseIntArrayElements)(JNIEnv*, jintArray,
                        jint*, jint);
    // 释放原生长整型数组的元素，可能复制数据回Java数组
    void        (*ReleaseLongArrayElements)(JNIEnv*, jlongArray,
                        jlong*, jint);
    // 释放原生浮点型数组的元素，可能复制数据回Java数组
    void        (*ReleaseFloatArrayElements)(JNIEnv*, jfloatArray,
                        jfloat*, jint);
    // 释放原生双精度浮点型数组的元素，可能复制数据回Java数组
    void        (*ReleaseDoubleArrayElements)(JNIEnv*, jdoubleArray,
                        jdouble*, jint);

    // 获取原生布尔数组的指定区域的元素到缓冲区
    void        (*GetBooleanArrayRegion)(JNIEnv*, jbooleanArray,
                        jsize, jsize, jboolean*);
    // 获取原生字节数组的指定区域的元素到缓冲区
    void        (*GetByteArrayRegion)(JNIEnv*, jbyteArray,
                        jsize, jsize, jbyte*);
    // 获取原生字符数组的指定区域的元素到缓冲区
    void        (*GetCharArrayRegion)(JNIEnv*, jcharArray,
                        jsize, jsize, jchar*);
    // 获取原生短整型数组的指定区域的元素到缓冲区
    void        (*GetShortArrayRegion)(JNIEnv*, jshortArray,
                        jsize, jsize, jshort*);
    // 获取原生整型数组的指定区域的元素到缓冲区
    void        (*GetIntArrayRegion)(JNIEnv*, jintArray,
                        jsize, jsize, jint*);
    // 获取原生长整型数组的指定区域的元素到缓冲区
    void        (*GetLongArrayRegion)(JNIEnv*, jlongArray,
                        jsize, jsize, jlong*);
    // 获取原生浮点型数组的指定区域的元素到缓冲区
    void        (*GetFloatArrayRegion)(JNIEnv*, jfloatArray,
                        jsize, jsize, jfloat*);
    // 获取原生双精度浮点型数组的指定区域的元素到缓冲区
    void        (*GetDoubleArrayRegion)(JNIEnv*, jdoubleArray,
                        jsize, jsize, jdouble*);

    // 设置原生布尔数组的指定区域的元素，从缓冲区复制到数组
    void        (*SetBooleanArrayRegion)(JNIEnv*, jbooleanArray,
                        jsize, jsize, const jboolean*);
    // 设置原生字节数组的指定区域的元素，从缓冲区复制到数组
    void        (*SetByteArrayRegion)(JNIEnv*, jbyteArray,
                        jsize, jsize, const jbyte*);
    // 声明函数指针，用于设置字符数组区域的元素
    void (*SetCharArrayRegion)(JNIEnv*, jcharArray, jsize, jsize, const jchar*);
    // 声明函数指针，用于设置短整型数组区域的元素
    void (*SetShortArrayRegion)(JNIEnv*, jshortArray, jsize, jsize, const jshort*);
    // 声明函数指针，用于设置整型数组区域的元素
    void (*SetIntArrayRegion)(JNIEnv*, jintArray, jsize, jsize, const jint*);
    // 声明函数指针，用于设置长整型数组区域的元素
    void (*SetLongArrayRegion)(JNIEnv*, jlongArray, jsize, jsize, const jlong*);
    // 声明函数指针，用于设置浮点数数组区域的元素
    void (*SetFloatArrayRegion)(JNIEnv*, jfloatArray, jsize, jsize, const jfloat*);
    // 声明函数指针，用于设置双精度浮点数数组区域的元素
    void (*SetDoubleArrayRegion)(JNIEnv*, jdoubleArray, jsize, jsize, const jdouble*);

    // 声明函数指针，用于在指定类中注册本地方法
    jint (*RegisterNatives)(JNIEnv*, jclass, const JNINativeMethod*, jint);
    // 声明函数指针，用于在指定类中注销本地方法
    jint (*UnregisterNatives)(JNIEnv*, jclass);
    // 声明函数指针，用于进入对象的监视器（即锁定对象）
    jint (*MonitorEnter)(JNIEnv*, jobject);
    // 声明函数指针，用于退出对象的监视器（即解锁对象）
    jint (*MonitorExit)(JNIEnv*, jobject);
    // 声明函数指针，用于获取当前线程的 Java 虚拟机实例
    jint (*GetJavaVM)(JNIEnv*, JavaVM**);

    // 声明函数指针，用于将 Java 字符串的一部分复制到本地 jchar 数组中
    void (*GetStringRegion)(JNIEnv*, jstring, jsize, jsize, jchar*);
    // 声明函数指针，用于将 Java 字符串的一部分复制到本地 UTF-8 编码的 char 数组中
    void (*GetStringUTFRegion)(JNIEnv*, jstring, jsize, jsize, char*);

    // 声明函数指针，用于获取原始数组的临时指针，允许直接访问数组的内容
    void* (*GetPrimitiveArrayCritical)(JNIEnv*, jarray, jboolean*);
    // 声明函数指针，用于释放通过 GetPrimitiveArrayCritical 获取的数组的临时指针
    void (*ReleasePrimitiveArrayCritical)(JNIEnv*, jarray, void*, jint);

    // 声明函数指针，用于获取 Java 字符串的临时指针，允许直接访问字符串的 UTF-16 编码内容
    const jchar* (*GetStringCritical)(JNIEnv*, jstring, jboolean*);
    // 声明函数指针，用于释放通过 GetStringCritical 获取的 Java 字符串的临时指针
    void (*ReleaseStringCritical)(JNIEnv*, jstring, const jchar*);

    // 声明函数指针，用于创建一个新的弱全局引用
    jweak (*NewWeakGlobalRef)(JNIEnv*, jobject);
    // 声明函数指针，用于删除一个弱全局引用
    void (*DeleteWeakGlobalRef)(JNIEnv*, jweak);

    // 声明函数指针，用于检查当前线程是否有未处理的异常
    jboolean (*ExceptionCheck)(JNIEnv*);
    // 声明函数指针，用于创建一个直接字节缓冲区
    jobject (*NewDirectByteBuffer)(JNIEnv*, void*, jlong);

    // 声明函数指针，用于获取直接字节缓冲区的地址
    void* (*GetDirectBufferAddress)(JNIEnv*, jobject);
    // 声明函数指针，用于获取直接字节缓冲区的容量
    jlong (*GetDirectBufferCapacity)(JNIEnv*, jobject);

    // 声明函数指针（JNI 1.6 新增），用于获取对象的引用类型
    jobjectRefType (*GetObjectRefType)(JNIEnv*, jobject);
};

/*
 * C++ object wrapper.
 *
 * This is usually overlaid on a C struct whose first element is a
 * JNINativeInterface*.  We rely somewhat on compiler behavior.
 */
struct _JNIEnv {
    /* do not rename this; it does not seem to be entirely opaque */
    // 指向JNI原生接口函数表的指针
    const struct JNINativeInterface* functions;

#if defined(__cplusplus)
    // 返回JNI的版本号
    jint GetVersion()
    { return functions->GetVersion(this); }

    // 定义一个Java类
    jclass DefineClass(const char *name, jobject loader, const jbyte* buf,
        jsize bufLen)
    { return functions->DefineClass(this, name, loader, buf, bufLen); }

    // 查找一个Java类
    jclass FindClass(const char* name)
    { return functions->FindClass(this, name); }

    // 从反射得到Java方法的方法ID
    jmethodID FromReflectedMethod(jobject method)
    { return functions->FromReflectedMethod(this, method); }

    // 从反射得到Java字段的字段ID
    jfieldID FromReflectedField(jobject field)
    { return functions->FromReflectedField(this, field); }

    // 转换Java方法为反射方法
    jobject ToReflectedMethod(jclass cls, jmethodID methodID, jboolean isStatic)
    { return functions->ToReflectedMethod(this, cls, methodID, isStatic); }

    // 获取Java类的父类
    jclass GetSuperclass(jclass clazz)
    { return functions->GetSuperclass(this, clazz); }

    // 判断一个Java类是否可以赋值给另一个Java类
    jboolean IsAssignableFrom(jclass clazz1, jclass clazz2)
    { return functions->IsAssignableFrom(this, clazz1, clazz2); }

    // 转换Java字段为反射字段
    jobject ToReflectedField(jclass cls, jfieldID fieldID, jboolean isStatic)
    { return functions->ToReflectedField(this, cls, fieldID, isStatic); }

    // 抛出一个Java异常
    jint Throw(jthrowable obj)
    { return functions->Throw(this, obj); }

    // 抛出一个新的Java异常
    jint ThrowNew(jclass clazz, const char* message)
    { return functions->ThrowNew(this, clazz, message); }

    // 返回当前发生的Java异常
    jthrowable ExceptionOccurred()
    { return functions->ExceptionOccurred(this); }

    // 打印当前Java异常的堆栈信息
    void ExceptionDescribe()
    { functions->ExceptionDescribe(this); }

    // 清除当前的Java异常
    void ExceptionClear()
    { functions->ExceptionClear(this); }

    // 抛出一个致命错误并终止程序
    void FatalError(const char* msg)
    { functions->FatalError(this, msg); }

    // 增加本地帧
    jint PushLocalFrame(jint capacity)
    { return functions->PushLocalFrame(this, capacity); }

    // 弹出本地帧
    jobject PopLocalFrame(jobject result)
    { return functions->PopLocalFrame(this, result); }

    // 创建一个全局引用
    jobject NewGlobalRef(jobject obj)
    { return functions->NewGlobalRef(this, obj); }

    // 删除一个全局引用
    void DeleteGlobalRef(jobject globalRef)
    { functions->DeleteGlobalRef(this, globalRef); }

    // 删除一个本地引用
    void DeleteLocalRef(jobject localRef)
    { functions->DeleteLocalRef(this, localRef); }

    // 判断两个引用是否相同
    jboolean IsSameObject(jobject ref1, jobject ref2)
    { return functions->IsSameObject(this, ref1, ref2); }

    // 创建一个本地引用
    jobject NewLocalRef(jobject ref)
    { return functions->NewLocalRef(this, ref); }

    // 确保本地引用的最小容量
    jint EnsureLocalCapacity(jint capacity)
    { return functions->EnsureLocalCapacity(this, capacity); }

    // 分配一个Java对象
    jobject AllocObject(jclass clazz)
    { return functions->AllocObject(this, clazz); }

    // 创建一个Java对象
    jobject NewObject(jclass clazz, jmethodID methodID, ...)
    {
        // 初始化一个 va_list 变量 args，用于存储可变参数列表
        va_list args;
        // 开始处理可变参数列表，args 将指向 methodID 之后的参数
        va_start(args, methodID);
        // 调用 JNI 函数库中的 NewObjectV 方法，创建一个新的 Java 对象
        jobject result = functions->NewObjectV(this, clazz, methodID, args);
        // 结束可变参数列表的处理
        va_end(args);
        // 返回创建的 Java 对象
        return result;
    }

    jobject NewObjectV(jclass clazz, jmethodID methodID, va_list args)
    { 
        // 调用 JNI 函数库中的 NewObjectV 方法，创建一个新的 Java 对象
        return functions->NewObjectV(this, clazz, methodID, args); 
    }

    jobject NewObjectA(jclass clazz, jmethodID methodID, jvalue* args)
    { 
        // 调用 JNI 函数库中的 NewObjectA 方法，创建一个新的 Java 对象
        return functions->NewObjectA(this, clazz, methodID, args); 
    }

    jclass GetObjectClass(jobject obj)
    { 
        // 调用 JNI 函数库中的 GetObjectClass 方法，获取 Java 对象的类对象
        return functions->GetObjectClass(this, obj); 
    }

    jboolean IsInstanceOf(jobject obj, jclass clazz)
    { 
        // 调用 JNI 函数库中的 IsInstanceOf 方法，判断 Java 对象是否是给定类的实例
        return functions->IsInstanceOf(this, obj, clazz); 
    }

    jmethodID GetMethodID(jclass clazz, const char* name, const char* sig)
    { 
        // 调用 JNI 函数库中的 GetMethodID 方法，获取 Java 类的方法 ID
        return functions->GetMethodID(this, clazz, name, sig); 
    }
#define CALL_TYPE_METHOD(_jtype, _jname)                                    \
    // 定义一个宏，用于调用特定类型的实例方法
    _jtype Call##_jname##Method(jobject obj, jmethodID methodID, ...)       \
    {                                                                       \
        // 声明变量以存储方法的返回值
        _jtype result;                                                      \
        // 声明变量列表
        va_list args;                                                       \
        // 初始化变量列表
        va_start(args, methodID);                                           \
        // 调用底层函数，执行实例方法调用，返回结果
        result = functions->Call##_jname##MethodV(this, obj, methodID,      \
                    args);                                                  \
        // 结束变量列表
        va_end(args);                                                       \
        // 返回方法的结果
        return result;                                                      \
    }

#define CALL_TYPE_METHODV(_jtype, _jname)                                   \
    // 定义一个宏，用于调用特定类型的实例方法，支持变量列表
    _jtype Call##_jname##MethodV(jobject obj, jmethodID methodID,           \
        va_list args)                                                       \
    { return functions->Call##_jname##MethodV(this, obj, methodID, args); }

#define CALL_TYPE_METHODA(_jtype, _jname)                                   \
    // 定义一个宏，用于调用特定类型的实例方法，支持 jvalue 数组参数
    _jtype Call##_jname##MethodA(jobject obj, jmethodID methodID,           \
        jvalue* args)                                                       \
    { return functions->Call##_jname##MethodA(this, obj, methodID, args); }

#define CALL_TYPE(_jtype, _jname)                                           \
    // 定义一个宏，用于同时生成调用特定类型实例方法的三个形式
    CALL_TYPE_METHOD(_jtype, _jname)                                        \
    CALL_TYPE_METHODV(_jtype, _jname)                                       \
    CALL_TYPE_METHODA(_jtype, _jname)

    // 生成针对不同基本数据类型的实例方法调用宏
    CALL_TYPE(jobject, Object)
    CALL_TYPE(jboolean, Boolean)
    CALL_TYPE(jbyte, Byte)
    CALL_TYPE(jchar, Char)
    CALL_TYPE(jshort, Short)
    CALL_TYPE(jint, Int)
    CALL_TYPE(jlong, Long)
    CALL_TYPE(jfloat, Float)
    CALL_TYPE(jdouble, Double)

    // 调用无返回值的实例方法，支持变量列表参数
    void CallVoidMethod(jobject obj, jmethodID methodID, ...)
    {
        // 声明变量列表
        va_list args;
        // 初始化变量列表
        va_start(args, methodID);
        // 调用底层函数，执行无返回值实例方法调用
        functions->CallVoidMethodV(this, obj, methodID, args);
        // 结束变量列表
        va_end(args);
    }

    // 调用无返回值的实例方法，支持变量列表参数
    void CallVoidMethodV(jobject obj, jmethodID methodID, va_list args)
    { functions->CallVoidMethodV(this, obj, methodID, args); }

    // 调用无返回值的实例方法，支持 jvalue 数组参数
    void CallVoidMethodA(jobject obj, jmethodID methodID, jvalue* args)
    { functions->CallVoidMethodA(this, obj, methodID, args); }

#define CALL_NONVIRT_TYPE_METHOD(_jtype, _jname)                            \
    // 定义一个宏，用于调用特定类型的非虚拟方法
    _jtype CallNonvirtual##_jname##Method(jobject obj, jclass clazz,        \
        jmethodID methodID, ...)
    {                                                                       \
        _jtype result;                                                      \
        // 声明一个变量 result，用于存储函数调用的返回结果
        va_list args;                                                       \
        // 声明一个变量 args，用于存储可变参数列表
        va_start(args, methodID);                                           \
        // 初始化 args，指向方法的参数列表，从 methodID 开始
        result = functions->CallNonvirtual##_jname##MethodV(this, obj,      \
                    clazz, methodID, args);                                 \
        // 调用函数指针 functions 的 CallNonvirtual##_jname##MethodV 方法，执行虚函数调用，
        // 返回结果存储在 result 中
        va_end(args);                                                       \
        // 结束对 args 的使用
        return result;                                                      \
        // 返回函数调用的结果
    }


这段代码片段是一个宏定义，用于调用 JNI（Java Native Interface）中的非虚函数。注释中详细解释了每行代码的作用，包括声明变量、初始化参数列表、调用函数、结束参数使用和返回函数调用结果。
// 定义宏：用于生成调用非虚拟方法的函数，接受可变参数列表
#define CALL_NONVIRT_TYPE_METHODV(_jtype, _jname)                           \
    _jtype CallNonvirtual##_jname##MethodV(jobject obj, jclass clazz,       \
        jmethodID methodID, va_list args)                                   \
    { return functions->CallNonvirtual##_jname##MethodV(this, obj, clazz,   \
        methodID, args); }

// 定义宏：用于生成调用非虚拟方法的函数，接受 jvalue* 类型的参数数组
#define CALL_NONVIRT_TYPE_METHODA(_jtype, _jname)                           \
    _jtype CallNonvirtual##_jname##MethodA(jobject obj, jclass clazz,       \
        jmethodID methodID, jvalue* args)                                   \
    { return functions->CallNonvirtual##_jname##MethodA(this, obj, clazz,   \
        methodID, args); }

// 定义宏：用于生成一组调用非虚拟方法的函数，包括方法、可变参数版本和参数数组版本
#define CALL_NONVIRT_TYPE(_jtype, _jname)                                   \
    CALL_NONVIRT_TYPE_METHOD(_jtype, _jname)                                \
    CALL_NONVIRT_TYPE_METHODV(_jtype, _jname)                               \
    CALL_NONVIRT_TYPE_METHODA(_jtype, _jname)

// 生成调用非虚拟方法的函数，例如 CallNonvirtualObjectMethod、CallNonvirtualObjectMethodV、CallNonvirtualObjectMethodA 等
CALL_NONVIRT_TYPE(jobject, Object)
CALL_NONVIRT_TYPE(jboolean, Boolean)
CALL_NONVIRT_TYPE(jbyte, Byte)
CALL_NONVIRT_TYPE(jchar, Char)
CALL_NONVIRT_TYPE(jshort, Short)
CALL_NONVIRT_TYPE(jint, Int)
CALL_NONVIRT_TYPE(jlong, Long)
CALL_NONVIRT_TYPE(jfloat, Float)
CALL_NONVIRT_TYPE(jdouble, Double)

// 定义函数：调用非虚拟方法并返回 void 类型的函数，接受可变参数列表
void CallNonvirtualVoidMethod(jobject obj, jclass clazz,
    jmethodID methodID, ...)
{
    va_list args;
    va_start(args, methodID); // 开始处理可变参数列表
    functions->CallNonvirtualVoidMethodV(this, obj, clazz, methodID, args); // 调用真正的方法处理函数
    va_end(args); // 结束处理可变参数列表
}

// 定义函数：调用非虚拟方法并返回 void 类型的函数，接受可变参数列表
void CallNonvirtualVoidMethodV(jobject obj, jclass clazz,
    jmethodID methodID, va_list args)
{
    functions->CallNonvirtualVoidMethodV(this, obj, clazz, methodID, args); // 调用真正的方法处理函数
}

// 定义函数：调用非虚拟方法并返回 void 类型的函数，接受参数数组
void CallNonvirtualVoidMethodA(jobject obj, jclass clazz,
    jmethodID methodID, jvalue* args)
{
    functions->CallNonvirtualVoidMethodA(this, obj, clazz, methodID, args); // 调用真正的方法处理函数
}

// 定义函数：获取对象字段的 ID
jfieldID GetFieldID(jclass clazz, const char* name, const char* sig)
{
    return functions->GetFieldID(this, clazz, name, sig); // 调用真正的方法处理函数
}

// 定义函数：获取对象字段的值，返回 jobject 类型
jobject GetObjectField(jobject obj, jfieldID fieldID)
{
    return functions->GetObjectField(this, obj, fieldID); // 调用真正的方法处理函数
}

// 定义函数：获取对象字段的值，返回 jboolean 类型
jboolean GetBooleanField(jobject obj, jfieldID fieldID)
{
    return functions->GetBooleanField(this, obj, fieldID); // 调用真正的方法处理函数
}

// 定义函数：获取对象字段的值，返回 jbyte 类型
jbyte GetByteField(jobject obj, jfieldID fieldID)
{
    return functions->GetByteField(this, obj, fieldID); // 调用真正的方法处理函数
}

// 定义函数：获取对象字段的值，返回 jchar 类型
jchar GetCharField(jobject obj, jfieldID fieldID)
{
    return functions->GetCharField(this, obj, fieldID); // 调用真正的方法处理函数
}

// 定义函数：获取对象字段的值，返回 jshort 类型
jshort GetShortField(jobject obj, jfieldID fieldID)
{
    return functions->GetShortField(this, obj, fieldID); // 调用真正的方法处理函数
}

// 定义函数：获取对象字段的值，返回 jint 类型
jint GetIntField(jobject obj, jfieldID fieldID)
{
    return functions->GetIntField(this, obj, fieldID); // 调用真正的方法处理函数
}

// 定义函数：获取对象字段的值，返回 jlong 类型
jlong GetLongField(jobject obj, jfieldID fieldID)
{
    return functions->GetLongField(this, obj, fieldID); // 调用真正的方法处理函数
}

// 定义函数：获取对象字段的值，返回 jfloat 类型
jfloat GetFloatField(jobject obj, jfieldID fieldID)
{
    return functions->GetFloatField(this, obj, fieldID); // 调用真正的方法处理函数
}
    // 获取指定对象的双精度浮点字段值
    jdouble GetDoubleField(jobject obj, jfieldID fieldID)
    { return functions->GetDoubleField(this, obj, fieldID); }

    // 设置指定对象的引用类型字段值
    void SetObjectField(jobject obj, jfieldID fieldID, jobject value)
    { functions->SetObjectField(this, obj, fieldID, value); }

    // 设置指定对象的布尔类型字段值
    void SetBooleanField(jobject obj, jfieldID fieldID, jboolean value)
    { functions->SetBooleanField(this, obj, fieldID, value); }

    // 设置指定对象的字节类型字段值
    void SetByteField(jobject obj, jfieldID fieldID, jbyte value)
    { functions->SetByteField(this, obj, fieldID, value); }

    // 设置指定对象的字符类型字段值
    void SetCharField(jobject obj, jfieldID fieldID, jchar value)
    { functions->SetCharField(this, obj, fieldID, value); }

    // 设置指定对象的短整型字段值
    void SetShortField(jobject obj, jfieldID fieldID, jshort value)
    { functions->SetShortField(this, obj, fieldID, value); }

    // 设置指定对象的整型字段值
    void SetIntField(jobject obj, jfieldID fieldID, jint value)
    { functions->SetIntField(this, obj, fieldID, value); }

    // 设置指定对象的长整型字段值
    void SetLongField(jobject obj, jfieldID fieldID, jlong value)
    { functions->SetLongField(this, obj, fieldID, value); }

    // 设置指定对象的单精度浮点字段值
    void SetFloatField(jobject obj, jfieldID fieldID, jfloat value)
    { functions->SetFloatField(this, obj, fieldID, value); }

    // 设置指定对象的双精度浮点字段值
    void SetDoubleField(jobject obj, jfieldID fieldID, jdouble value)
    { functions->SetDoubleField(this, obj, fieldID, value); }

    // 获取指定类的静态方法的方法 ID
    jmethodID GetStaticMethodID(jclass clazz, const char* name, const char* sig)
    { return functions->GetStaticMethodID(this, clazz, name, sig); }
#define CALL_STATIC_TYPE_METHOD(_jtype, _jname)                             \
    // 定义一个宏，用于调用静态方法，并返回指定类型的结果 \
    _jtype CallStatic##_jname##Method(jclass clazz, jmethodID methodID,     \
        ...)                                                                \
    {                                                                       \
        // 声明结果变量 \
        _jtype result;                                                      \
        // 声明参数列表 \
        va_list args;                                                       \
        // 初始化参数列表 \
        va_start(args, methodID);                                           \
        // 调用具体的函数接口来执行静态方法调用，使用参数列表 \
        result = functions->CallStatic##_jname##MethodV(this, clazz,        \
                    methodID, args);                                        \
        // 结束参数列表 \
        va_end(args);                                                       \
        // 返回执行结果 \
        return result;                                                      \
    }

#define CALL_STATIC_TYPE_METHODV(_jtype, _jname)                            \
    // 定义一个宏，用于调用静态方法（带变长参数），并返回指定类型的结果 \
    _jtype CallStatic##_jname##MethodV(jclass clazz, jmethodID methodID,    \
        va_list args)                                                       \
    { return functions->CallStatic##_jname##MethodV(this, clazz, methodID,  \
        args); }

#define CALL_STATIC_TYPE_METHODA(_jtype, _jname)                            \
    // 定义一个宏，用于调用静态方法（带 jvalue 数组参数），并返回指定类型的结果 \
    _jtype CallStatic##_jname##MethodA(jclass clazz, jmethodID methodID,    \
        jvalue* args)                                                       \
    { return functions->CallStatic##_jname##MethodA(this, clazz, methodID,  \
        args); }

#define CALL_STATIC_TYPE(_jtype, _jname)                                    \
    // 定义一个宏，用于同时定义三种静态方法调用宏 \
    CALL_STATIC_TYPE_METHOD(_jtype, _jname)                                 \
    CALL_STATIC_TYPE_METHODV(_jtype, _jname)                                \
    CALL_STATIC_TYPE_METHODA(_jtype, _jname)

CALL_STATIC_TYPE(jobject, Object)
CALL_STATIC_TYPE(jboolean, Boolean)
CALL_STATIC_TYPE(jbyte, Byte)
CALL_STATIC_TYPE(jchar, Char)
CALL_STATIC_TYPE(jshort, Short)
CALL_STATIC_TYPE(jint, Int)
CALL_STATIC_TYPE(jlong, Long)
CALL_STATIC_TYPE(jfloat, Float)
CALL_STATIC_TYPE(jdouble, Double)

void CallStaticVoidMethod(jclass clazz, jmethodID methodID, ...)
{
    // 声明参数列表
    va_list args;
    // 初始化参数列表
    va_start(args, methodID);
    // 调用具体的函数接口来执行静态方法调用，使用参数列表
    functions->CallStaticVoidMethodV(this, clazz, methodID, args);
    // 结束参数列表
    va_end(args);
}

void CallStaticVoidMethodV(jclass clazz, jmethodID methodID, va_list args)
{
    // 调用具体的函数接口来执行静态方法调用（无返回值），使用参数列表
    functions->CallStaticVoidMethodV(this, clazz, methodID, args);
}

void CallStaticVoidMethodA(jclass clazz, jmethodID methodID, jvalue* args)
{
    // 调用具体的函数接口来执行静态方法调用（无返回值），使用 jvalue 数组作为参数
    functions->CallStaticVoidMethodA(this, clazz, methodID, args);
}

jfieldID GetStaticFieldID(jclass clazz, const char* name, const char* sig)
{
    // 获取静态字段的 ID
    return functions->GetStaticFieldID(this, clazz, name, sig);
}

jobject GetStaticObjectField(jclass clazz, jfieldID fieldID)
{
    // 获取静态对象字段的值
    return functions->GetStaticObjectField(this, clazz, fieldID);
}
    // 调用底层 JNI 函数库，获取静态 boolean 字段的值
    jboolean GetStaticBooleanField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticBooleanField(this, clazz, fieldID); }

    // 调用底层 JNI 函数库，获取静态 byte 字段的值
    jbyte GetStaticByteField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticByteField(this, clazz, fieldID); }

    // 调用底层 JNI 函数库，获取静态 char 字段的值
    jchar GetStaticCharField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticCharField(this, clazz, fieldID); }

    // 调用底层 JNI 函数库，获取静态 short 字段的值
    jshort GetStaticShortField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticShortField(this, clazz, fieldID); }

    // 调用底层 JNI 函数库，获取静态 int 字段的值
    jint GetStaticIntField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticIntField(this, clazz, fieldID); }

    // 调用底层 JNI 函数库，获取静态 long 字段的值
    jlong GetStaticLongField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticLongField(this, clazz, fieldID); }

    // 调用底层 JNI 函数库，获取静态 float 字段的值
    jfloat GetStaticFloatField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticFloatField(this, clazz, fieldID); }

    // 调用底层 JNI 函数库，获取静态 double 字段的值
    jdouble GetStaticDoubleField(jclass clazz, jfieldID fieldID)
    { return functions->GetStaticDoubleField(this, clazz, fieldID); }

    // 调用底层 JNI 函数库，设置静态对象字段的值
    void SetStaticObjectField(jclass clazz, jfieldID fieldID, jobject value)
    { functions->SetStaticObjectField(this, clazz, fieldID, value); }

    // 调用底层 JNI 函数库，设置静态 boolean 字段的值
    void SetStaticBooleanField(jclass clazz, jfieldID fieldID, jboolean value)
    { functions->SetStaticBooleanField(this, clazz, fieldID, value); }

    // 调用底层 JNI 函数库，设置静态 byte 字段的值
    void SetStaticByteField(jclass clazz, jfieldID fieldID, jbyte value)
    { functions->SetStaticByteField(this, clazz, fieldID, value); }

    // 调用底层 JNI 函数库，设置静态 char 字段的值
    void SetStaticCharField(jclass clazz, jfieldID fieldID, jchar value)
    { functions->SetStaticCharField(this, clazz, fieldID, value); }

    // 调用底层 JNI 函数库，设置静态 short 字段的值
    void SetStaticShortField(jclass clazz, jfieldID fieldID, jshort value)
    { functions->SetStaticShortField(this, clazz, fieldID, value); }

    // 调用底层 JNI 函数库，设置静态 int 字段的值
    void SetStaticIntField(jclass clazz, jfieldID fieldID, jint value)
    { functions->SetStaticIntField(this, clazz, fieldID, value); }

    // 调用底层 JNI 函数库，设置静态 long 字段的值
    void SetStaticLongField(jclass clazz, jfieldID fieldID, jlong value)
    { functions->SetStaticLongField(this, clazz, fieldID, value); }

    // 调用底层 JNI 函数库，设置静态 float 字段的值
    void SetStaticFloatField(jclass clazz, jfieldID fieldID, jfloat value)
    { functions->SetStaticFloatField(this, clazz, fieldID, value); }

    // 调用底层 JNI 函数库，设置静态 double 字段的值
    void SetStaticDoubleField(jclass clazz, jfieldID fieldID, jdouble value)
    { functions->SetStaticDoubleField(this, clazz, fieldID, value); }

    // 调用底层 JNI 函数库，创建一个新的 jstring 对象
    jstring NewString(const jchar* unicodeChars, jsize len)
    { return functions->NewString(this, unicodeChars, len); }

    // 调用底层 JNI 函数库，获取 jstring 对象的长度
    jsize GetStringLength(jstring string)
    { return functions->GetStringLength(this, string); }

    // 调用底层 JNI 函数库，获取 jstring 对象中的字符数组
    const jchar* GetStringChars(jstring string, jboolean* isCopy)
    { return functions->GetStringChars(this, string, isCopy); }

    // 调用底层 JNI 函数库，释放通过 GetStringChars 获取的字符数组
    void ReleaseStringChars(jstring string, const jchar* chars)
    { functions->ReleaseStringChars(this, string, chars); }

    // 调用底层 JNI 函数库，根据 UTF-8 字符串创建一个新的 jstring 对象
    jstring NewStringUTF(const char* bytes)
    { return functions->NewStringUTF(this, bytes); }

    // 调用底层 JNI 函数库，获取 jstring 对象的 UTF-8 编码后的长度
    jsize GetStringUTFLength(jstring string)
    // 调用 JNI 函数 functions->GetStringUTFLength，返回 jstring 字符串的 UTF 编码长度
    { return functions->GetStringUTFLength(this, string); }
    
    // 调用 JNI 函数 functions->GetStringUTFChars，获取 jstring 的 UTF 编码字符，并返回其指针
    const char* GetStringUTFChars(jstring string, jboolean* isCopy)
    { return functions->GetStringUTFChars(this, string, isCopy); }
    
    // 调用 JNI 函数 functions->ReleaseStringUTFChars，释放通过 GetStringUTFChars 获取的 UTF 编码字符
    void ReleaseStringUTFChars(jstring string, const char* utf)
    { functions->ReleaseStringUTFChars(this, string, utf); }
    
    // 调用 JNI 函数 functions->GetArrayLength，返回 jarray（数组）的长度
    jsize GetArrayLength(jarray array)
    { return functions->GetArrayLength(this, array); }
    
    // 调用 JNI 函数 functions->NewObjectArray，创建一个包含指定长度、元素类型和初始元素的对象数组
    jobjectArray NewObjectArray(jsize length, jclass elementClass,
        jobject initialElement)
    { return functions->NewObjectArray(this, length, elementClass,
        initialElement); }
    
    // 调用 JNI 函数 functions->GetObjectArrayElement，获取对象数组中指定索引位置的元素
    jobject GetObjectArrayElement(jobjectArray array, jsize index)
    { return functions->GetObjectArrayElement(this, array, index); }
    
    // 调用 JNI 函数 functions->SetObjectArrayElement，设置对象数组中指定索引位置的元素
    void SetObjectArrayElement(jobjectArray array, jsize index, jobject value)
    { functions->SetObjectArrayElement(this, array, index, value); }
    
    // 调用 JNI 函数 functions->NewBooleanArray，创建一个指定长度的 boolean 数组
    jbooleanArray NewBooleanArray(jsize length)
    { return functions->NewBooleanArray(this, length); }
    // 调用 JNI 函数 functions->NewByteArray，创建一个指定长度的 byte 数组
    jbyteArray NewByteArray(jsize length)
    { return functions->NewByteArray(this, length); }
    // 调用 JNI 函数 functions->NewCharArray，创建一个指定长度的 char 数组
    jcharArray NewCharArray(jsize length)
    { return functions->NewCharArray(this, length); }
    // 调用 JNI 函数 functions->NewShortArray，创建一个指定长度的 short 数组
    jshortArray NewShortArray(jsize length)
    { return functions->NewShortArray(this, length); }
    // 调用 JNI 函数 functions->NewIntArray，创建一个指定长度的 int 数组
    jintArray NewIntArray(jsize length)
    { return functions->NewIntArray(this, length); }
    // 调用 JNI 函数 functions->NewLongArray，创建一个指定长度的 long 数组
    jlongArray NewLongArray(jsize length)
    { return functions->NewLongArray(this, length); }
    // 调用 JNI 函数 functions->NewFloatArray，创建一个指定长度的 float 数组
    jfloatArray NewFloatArray(jsize length)
    { return functions->NewFloatArray(this, length); }
    // 调用 JNI 函数 functions->NewDoubleArray，创建一个指定长度的 double 数组
    jdoubleArray NewDoubleArray(jsize length)
    { return functions->NewDoubleArray(this, length); }
    
    // 调用 JNI 函数 functions->GetBooleanArrayElements，获取 boolean 数组的元素指针
    jboolean* GetBooleanArrayElements(jbooleanArray array, jboolean* isCopy)
    { return functions->GetBooleanArrayElements(this, array, isCopy); }
    // 调用 JNI 函数 functions->GetByteArrayElements，获取 byte 数组的元素指针
    jbyte* GetByteArrayElements(jbyteArray array, jboolean* isCopy)
    { return functions->GetByteArrayElements(this, array, isCopy); }
    // 调用 JNI 函数 functions->GetCharArrayElements，获取 char 数组的元素指针
    jchar* GetCharArrayElements(jcharArray array, jboolean* isCopy)
    { return functions->GetCharArrayElements(this, array, isCopy); }
    // 调用 JNI 函数 functions->GetShortArrayElements，获取 short 数组的元素指针
    jshort* GetShortArrayElements(jshortArray array, jboolean* isCopy)
    { return functions->GetShortArrayElements(this, array, isCopy); }
    // 调用 JNI 函数 functions->GetIntArrayElements，获取 int 数组的元素指针
    jint* GetIntArrayElements(jintArray array, jboolean* isCopy)
    { return functions->GetIntArrayElements(this, array, isCopy); }
    // 调用 JNI 函数 functions->GetLongArrayElements，获取 long 数组的元素指针
    jlong* GetLongArrayElements(jlongArray array, jboolean* isCopy)
    { return functions->GetLongArrayElements(this, array, isCopy); }
    // 调用 JNI 函数 functions->GetFloatArrayElements，获取 float 数组的元素指针
    jfloat* GetFloatArrayElements(jfloatArray array, jboolean* isCopy)
    { return functions->GetFloatArrayElements(this, array, isCopy); }
    // 调用 JNI 函数 functions->GetDoubleArrayElements，获取 double 数组的元素指针
    jdouble* GetDoubleArrayElements(jdoubleArray array, jboolean* isCopy)
    { return functions->GetDoubleArrayElements(this, array, isCopy); }
    
    // 调用 JNI 函数 functions->ReleaseBooleanArrayElements，释放通过 GetBooleanArrayElements 获取的 boolean 数组元素
    void ReleaseBooleanArrayElements(jbooleanArray array, jboolean* elems,
        jint mode)
    { functions->ReleaseBooleanArrayElements(this, array, elems, mode); }
    // 释放 jbyteArray 中的本机数组元素，并根据模式释放内存
    void ReleaseByteArrayElements(jbyteArray array, jbyte* elems,
        jint mode)
    { functions->ReleaseByteArrayElements(this, array, elems, mode); }

    // 释放 jcharArray 中的本机数组元素，并根据模式释放内存
    void ReleaseCharArrayElements(jcharArray array, jchar* elems,
        jint mode)
    { functions->ReleaseCharArrayElements(this, array, elems, mode); }

    // 释放 jshortArray 中的本机数组元素，并根据模式释放内存
    void ReleaseShortArrayElements(jshortArray array, jshort* elems,
        jint mode)
    { functions->ReleaseShortArrayElements(this, array, elems, mode); }

    // 释放 jintArray 中的本机数组元素，并根据模式释放内存
    void ReleaseIntArrayElements(jintArray array, jint* elems,
        jint mode)
    { functions->ReleaseIntArrayElements(this, array, elems, mode); }

    // 释放 jlongArray 中的本机数组元素，并根据模式释放内存
    void ReleaseLongArrayElements(jlongArray array, jlong* elems,
        jint mode)
    { functions->ReleaseLongArrayElements(this, array, elems, mode); }

    // 释放 jfloatArray 中的本机数组元素，并根据模式释放内存
    void ReleaseFloatArrayElements(jfloatArray array, jfloat* elems,
        jint mode)
    { functions->ReleaseFloatArrayElements(this, array, elems, mode); }

    // 释放 jdoubleArray 中的本机数组元素，并根据模式释放内存
    void ReleaseDoubleArrayElements(jdoubleArray array, jdouble* elems,
        jint mode)
    { functions->ReleaseDoubleArrayElements(this, array, elems, mode); }

    // 获取 jbooleanArray 中指定范围的本机数组元素，并存储到 buf 中
    void GetBooleanArrayRegion(jbooleanArray array, jsize start, jsize len,
        jboolean* buf)
    { functions->GetBooleanArrayRegion(this, array, start, len, buf); }

    // 获取 jbyteArray 中指定范围的本机数组元素，并存储到 buf 中
    void GetByteArrayRegion(jbyteArray array, jsize start, jsize len,
        jbyte* buf)
    { functions->GetByteArrayRegion(this, array, start, len, buf); }

    // 获取 jcharArray 中指定范围的本机数组元素，并存储到 buf 中
    void GetCharArrayRegion(jcharArray array, jsize start, jsize len,
        jchar* buf)
    { functions->GetCharArrayRegion(this, array, start, len, buf); }

    // 获取 jshortArray 中指定范围的本机数组元素，并存储到 buf 中
    void GetShortArrayRegion(jshortArray array, jsize start, jsize len,
        jshort* buf)
    { functions->GetShortArrayRegion(this, array, start, len, buf); }

    // 获取 jintArray 中指定范围的本机数组元素，并存储到 buf 中
    void GetIntArrayRegion(jintArray array, jsize start, jsize len,
        jint* buf)
    { functions->GetIntArrayRegion(this, array, start, len, buf); }

    // 获取 jlongArray 中指定范围的本机数组元素，并存储到 buf 中
    void GetLongArrayRegion(jlongArray array, jsize start, jsize len,
        jlong* buf)
    { functions->GetLongArrayRegion(this, array, start, len, buf); }

    // 获取 jfloatArray 中指定范围的本机数组元素，并存储到 buf 中
    void GetFloatArrayRegion(jfloatArray array, jsize start, jsize len,
        jfloat* buf)
    { functions->GetFloatArrayRegion(this, array, start, len, buf); }

    // 获取 jdoubleArray 中指定范围的本机数组元素，并存储到 buf 中
    void GetDoubleArrayRegion(jdoubleArray array, jsize start, jsize len,
        jdouble* buf)
    { functions->GetDoubleArrayRegion(this, array, start, len, buf); }

    // 设置 jbooleanArray 中指定范围的本机数组元素为给定 buf 中的值
    void SetBooleanArrayRegion(jbooleanArray array, jsize start, jsize len,
        const jboolean* buf)
    { functions->SetBooleanArrayRegion(this, array, start, len, buf); }

    // 设置 jbyteArray 中指定范围的本机数组元素为给定 buf 中的值
    void SetByteArrayRegion(jbyteArray array, jsize start, jsize len,
        const jbyte* buf)
    { functions->SetByteArrayRegion(this, array, start, len, buf); }

    // 设置 jcharArray 中指定范围的本机数组元素为给定 buf 中的值
    void SetCharArrayRegion(jcharArray array, jsize start, jsize len,
        const jchar* buf)
    { functions->SetCharArrayRegion(this, array, start, len, buf); }
    // 设置 jshortArray 中的一部分元素
    void SetShortArrayRegion(jshortArray array, jsize start, jsize len,
        const jshort* buf)
    { functions->SetShortArrayRegion(this, array, start, len, buf); }
    
    // 设置 jintArray 中的一部分元素
    void SetIntArrayRegion(jintArray array, jsize start, jsize len,
        const jint* buf)
    { functions->SetIntArrayRegion(this, array, start, len, buf); }
    
    // 设置 jlongArray 中的一部分元素
    void SetLongArrayRegion(jlongArray array, jsize start, jsize len,
        const jlong* buf)
    { functions->SetLongArrayRegion(this, array, start, len, buf); }
    
    // 设置 jfloatArray 中的一部分元素
    void SetFloatArrayRegion(jfloatArray array, jsize start, jsize len,
        const jfloat* buf)
    { functions->SetFloatArrayRegion(this, array, start, len, buf); }
    
    // 设置 jdoubleArray 中的一部分元素
    void SetDoubleArrayRegion(jdoubleArray array, jsize start, jsize len,
        const jdouble* buf)
    { functions->SetDoubleArrayRegion(this, array, start, len, buf); }
    
    // 在给定类注册本地方法
    jint RegisterNatives(jclass clazz, const JNINativeMethod* methods,
        jint nMethods)
    { return functions->RegisterNatives(this, clazz, methods, nMethods); }
    
    // 取消注册给定类的本地方法
    jint UnregisterNatives(jclass clazz)
    { return functions->UnregisterNatives(this, clazz); }
    
    // 进入对象的监视器（锁定）
    jint MonitorEnter(jobject obj)
    { return functions->MonitorEnter(this, obj); }
    
    // 退出对象的监视器（解锁）
    jint MonitorExit(jobject obj)
    { return functions->MonitorExit(this, obj); }
    
    // 获取当前线程关联的 Java 虚拟机
    jint GetJavaVM(JavaVM** vm)
    { return functions->GetJavaVM(this, vm); }
    
    // 复制 jstring 中的一部分字符到缓冲区
    void GetStringRegion(jstring str, jsize start, jsize len, jchar* buf)
    { functions->GetStringRegion(this, str, start, len, buf); }
    
    // 复制 jstring 中的一部分 UTF-8 编码字符到缓冲区
    void GetStringUTFRegion(jstring str, jsize start, jsize len, char* buf)
    { return functions->GetStringUTFRegion(this, str, start, len, buf); }
    
    // 获取原始数组的临界区域，以便直接访问数据
    void* GetPrimitiveArrayCritical(jarray array, jboolean* isCopy)
    { return functions->GetPrimitiveArrayCritical(this, array, isCopy); }
    
    // 释放原始数组的临界区域
    void ReleasePrimitiveArrayCritical(jarray array, void* carray, jint mode)
    { functions->ReleasePrimitiveArrayCritical(this, array, carray, mode); }
    
    // 获取 jstring 的临界区域，以便直接访问 UTF-16 编码的字符数据
    const jchar* GetStringCritical(jstring string, jboolean* isCopy)
    { return functions->GetStringCritical(this, string, isCopy); }
    
    // 释放 jstring 的临界区域
    void ReleaseStringCritical(jstring string, const jchar* carray)
    { functions->ReleaseStringCritical(this, string, carray); }
    
    // 创建一个新的弱全局引用
    jweak NewWeakGlobalRef(jobject obj)
    { return functions->NewWeakGlobalRef(this, obj); }
    
    // 删除一个弱全局引用
    void DeleteWeakGlobalRef(jweak obj)
    { functions->DeleteWeakGlobalRef(this, obj); }
    
    // 检查当前线程是否有未处理的异常
    jboolean ExceptionCheck()
    { return functions->ExceptionCheck(this); }
    
    // 创建一个直接字节缓冲区对象
    jobject NewDirectByteBuffer(void* address, jlong capacity)
    { return functions->NewDirectByteBuffer(this, address, capacity); }
    
    // 获取直接字节缓冲区对象的地址
    void* GetDirectBufferAddress(jobject buf)
    { return functions->GetDirectBufferAddress(this, buf); }
    
    // 获取直接字节缓冲区对象的容量
    jlong GetDirectBufferCapacity(jobject buf)
    { return functions->GetDirectBufferCapacity(this, buf); }
    
    // 获取对象的引用类型
    /* added in JNI 1.6 */
    jobjectRefType GetObjectRefType(jobject obj)
    { return functions->GetObjectRefType(this, obj); }
/*
 * 结束 C++ 代码段
 */
#endif /*__cplusplus*/
};


/*
 * JNI 调用接口定义
 */
struct JNIInvokeInterface {
    void*       reserved0;                      // 保留字段
    void*       reserved1;                      // 保留字段
    void*       reserved2;                      // 保留字段
    jint        (*DestroyJavaVM)(JavaVM*);      // 销毁 Java 虚拟机的函数指针
    jint        (*AttachCurrentThread)(JavaVM*, JNIEnv**, void*);  // 附加当前线程到 Java 虚拟机的函数指针
    jint        (*DetachCurrentThread)(JavaVM*);  // 分离当前线程的函数指针
    jint        (*GetEnv)(JavaVM*, void**, jint);  // 获取环境变量的函数指针
    jint        (*AttachCurrentThreadAsDaemon)(JavaVM*, JNIEnv**, void*);  // 作为守护线程附加当前线程的函数指针
};

/*
 * Java 虚拟机结构体定义
 */
struct _JavaVM {
    const struct JNIInvokeInterface* functions;  // JNI 调用接口结构体指针

#if defined(__cplusplus)
    jint DestroyJavaVM()                        // 销毁 Java 虚拟机的成员函数
    { return functions->DestroyJavaVM(this); }
    jint AttachCurrentThread(JNIEnv** p_env, void* thr_args)  // 附加当前线程到 Java 虚拟机的成员函数
    { return functions->AttachCurrentThread(this, p_env, thr_args); }
    jint DetachCurrentThread()                  // 分离当前线程的成员函数
    { return functions->DetachCurrentThread(this); }
    jint GetEnv(void** env, jint version)       // 获取环境变量的成员函数
    { return functions->GetEnv(this, env, version); }
    jint AttachCurrentThreadAsDaemon(JNIEnv** p_env, void* thr_args)  // 作为守护线程附加当前线程的成员函数
    { return functions->AttachCurrentThreadAsDaemon(this, p_env, thr_args); }
#endif /*__cplusplus*/
};

/*
 * Java 虚拟机附加参数结构体定义
 */
struct JavaVMAttachArgs {
    jint        version;    /* 必须 >= JNI_VERSION_1_2 的版本号 */
    const char* name;       /* 线程名，UTF-8 字符串，可以为 NULL */
    jobject     group;      /* 线程组对象的全局引用，或者为 NULL */
};
typedef struct JavaVMAttachArgs JavaVMAttachArgs;

/*
 * JNI 1.2+ 初始化结构体定义
 */
typedef struct JavaVMOption {
    const char* optionString;  // Java 虚拟机选项字符串
    void*       extraInfo;     // 额外信息
} JavaVMOption;

typedef struct JavaVMInitArgs {
    jint        version;            /* 使用 JNI_VERSION_1_2 或更高版本 */
    jint        nOptions;           /* 选项数量 */
    JavaVMOption* options;          /* 选项数组 */
    jboolean    ignoreUnrecognized; /* 是否忽略未识别的选项 */
} JavaVMInitArgs;

#ifdef __cplusplus
extern "C" {
#endif
/*
 * VM 初始化函数声明
 *
 * 这些函数是 JNI 导出给虚拟机的唯一符号。
 */
jint JNI_GetDefaultJavaVMInitArgs(void*);   // 获取默认 Java 虚拟机初始化参数
jint JNI_CreateJavaVM(JavaVM**, JNIEnv**, void*);  // 创建 Java 虚拟机
jint JNI_GetCreatedJavaVMs(JavaVM**, jsize, jsize*);  // 获取已创建的 Java 虚拟机数量

#define JNIIMPORT
// 为了与 Windows 上的 JNIEXPORT 匹配
#define JNIEXPORT __declspec(dllexport)
#define JNICALL

/*
 * 由可加载共享库导出的函数原型。
 * 这些函数由 JNI 调用，而不是由 JNI 提供。
 */
JNIEXPORT jint JNI_OnLoad(JavaVM* vm, void* reserved);   // 加载时调用的 JNI 函数
JNIEXPORT void JNI_OnUnload(JavaVM* vm, void* reserved);  // 卸载时调用的 JNI 函数

#ifdef __cplusplus
}
#endif

/*
 * Manifest 常量定义
 */
#define JNI_FALSE   0   // JNI 常量：假
#define JNI_TRUE    1   // JNI 常量：真

#define JNI_VERSION_1_1 0x00010001   // JNI 版本 1.1
#define JNI_VERSION_1_2 0x00010002   // JNI 版本 1.2
#define JNI_VERSION_1_4 0x00010004   // JNI 版本 1.4
#define JNI_VERSION_1_6 0x00010006   // JNI 版本 1.6

#define JNI_OK          (0)         /* 没有错误 */
#define JNI_ERR         (-1)        /* 通用错误 */
#define JNI_EDETACHED   (-2)        /* 线程从虚拟机分离 */
#define JNI_EVERSION    (-3)        /* JNI 版本错误 */
#define JNI_COMMIT      1           /* 复制内容，但不释放缓冲区 */
#define JNI_ABORT       2           /* 直接释放缓冲区，不进行复制 */

#endif  /* JNI_H_ */
```