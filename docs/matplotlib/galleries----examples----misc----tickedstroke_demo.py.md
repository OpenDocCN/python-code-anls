# `D:\src\scipysrc\matplotlib\galleries\examples\misc\tickedstroke_demo.py`

```py
"""
=======================
TickedStroke patheffect
=======================

Matplotlib's :mod:`.patheffects` can be used to alter the way paths
are drawn at a low enough level that they can affect almost anything.

The :ref:`patheffects guide<patheffects_guide>`
details the use of patheffects.

The `~matplotlib.patheffects.TickedStroke` patheffect illustrated here
draws a path with a ticked style.  The spacing, length, and angle of
ticks can be controlled.

See also the :doc:`/gallery/lines_bars_and_markers/lines_with_ticks_demo` example.

See also the :doc:`/gallery/images_contours_and_fields/contours_in_optimization_demo`
example.
"""

import matplotlib.pyplot as plt
import numpy as np

# %%
# Applying TickedStroke to paths
# ==============================
import matplotlib.patches as patches
from matplotlib.path import Path
import matplotlib.patheffects as patheffects

# 创建一个 6x6 英寸大小的图形窗口
fig, ax = plt.subplots(figsize=(6, 6))

# 创建一个单位圆形的路径对象
path = Path.unit_circle()

# 创建一个路径补丁对象，用于绘制路径，设置路径效果为 TickedStroke
patch = patches.PathPatch(path, facecolor='none', lw=2, path_effects=[
    patheffects.withTickedStroke(angle=-90, spacing=10, length=1)])

# 将路径补丁添加到图形的坐标轴上
ax.add_patch(patch)

# 设置坐标轴的等比例显示
ax.axis('equal')

# 设置 x 和 y 轴的限制
ax.set_xlim(-2, 2)
ax.set_ylim(-2, 2)

# 显示图形
plt.show()

# %%
# Applying TickedStroke to lines
# ==============================
fig, ax = plt.subplots(figsize=(6, 6))

# 绘制一条直线，并应用 TickedStroke 路径效果
ax.plot([0, 1], [0, 1], label="Line",
        path_effects=[patheffects.withTickedStroke(spacing=7, angle=135)])

# 生成曲线数据，并绘制曲线，应用 TickedStroke 路径效果
nx = 101
x = np.linspace(0.0, 1.0, nx)
y = 0.3*np.sin(x*8) + 0.4
ax.plot(x, y, label="Curve", path_effects=[patheffects.withTickedStroke()])

# 添加图例
ax.legend()

# 显示图形
plt.show()

# %%
# Applying TickedStroke to contour plots
# ======================================
#
# Contour plot with objective and constraints.
# Curves generated by contour to represent a typical constraint in an
# optimization problem should be plotted with angles between zero and
# 180 degrees.
fig, ax = plt.subplots(figsize=(6, 6))

nx = 101
ny = 105

# 设置调查向量
xvec = np.linspace(0.001, 4.0, nx)
yvec = np.linspace(0.001, 4.0, ny)

# 设置调查矩阵。设计盘载和齿轮比。
x1, x2 = np.meshgrid(xvec, yvec)

# 评估要绘制的一些内容
obj = x1**2 + x2**2 - 2*x1 - 2*x2 + 2
g1 = -(3*x1 + x2 - 5.5)
g2 = -(x1 + 2*x2 - 4.5)
g3 = 0.8 + x1**-3 - x2

# 绘制等高线图，应用 TickedStroke 路径效果
cntr = ax.contour(x1, x2, obj, [0.01, 0.1, 0.5, 1, 2, 4, 8, 16],
                  colors='black')
ax.clabel(cntr, fmt="%2.1f", use_clabeltext=True)

cg1 = ax.contour(x1, x2, g1, [0], colors='sandybrown')
cg1.set(path_effects=[patheffects.withTickedStroke(angle=135)])

cg2 = ax.contour(x1, x2, g2, [0], colors='orangered')
cg2.set(path_effects=[patheffects.withTickedStroke(angle=60, length=2)])

cg3 = ax.contour(x1, x2, g3, [0], colors='mediumblue')
cg3.set(path_effects=[patheffects.withTickedStroke(spacing=7)])

# 设置 x 和 y 轴的限制
ax.set_xlim(0, 4)
ax.set_ylim(0, 4)

# 显示图形
plt.show()

# %%
# Direction/side of the ticks
# ===========================
#
# To change which side of the line the ticks are drawn, change the sign of the angle.
# 创建一个新的图形和子图，指定图形大小为 6x6 英寸
fig, ax = plt.subplots(figsize=(6, 6))

# 定义线的起点和终点坐标
line_x = line_y = [0, 1]

# 在子图 ax 上绘制一条直线，设置标签为 "Line"
# 使用 path_effects 参数添加路径效果，这里是带有刻度样式的描边效果
# spacing 控制刻度之间的间隔，angle 控制刻度的角度
ax.plot(line_x, line_y, label="Line",
        path_effects=[patheffects.withTickedStroke(spacing=7, angle=135)])

# 在同一个子图上再绘制一条直线，设置标签为 "Opposite side"
# 使用 path_effects 参数添加路径效果，同样是带有刻度样式的描边效果，但角度为 -135 度
ax.plot(line_x, line_y, label="Opposite side",
        path_effects=[patheffects.withTickedStroke(spacing=7, angle=-135)])

# 添加图例，显示标签信息
ax.legend()

# 显示图形
plt.show()
```