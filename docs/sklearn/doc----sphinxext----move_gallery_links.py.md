# `D:\src\scipysrc\scikit-learn\doc\sphinxext\move_gallery_links.py`

```
"""
This script intends to better integrate sphinx-gallery into pydata-sphinx-theme. In
particular, it moves the download links and badge links in the footer of each generated
example page into the secondary sidebar, then removes the footer and the top note
pointing to the footer.

The download links are for Python source code and Jupyter notebook respectively, and
the badge links are for JupyterLite and Binder.

Currently this is achieved via post-processing the HTML generated by sphinx-gallery.
This hack can be removed if the following upstream issue is resolved:
https://github.com/sphinx-gallery/sphinx-gallery/issues/1258
"""

# 导入必要的模块
from pathlib import Path  # 从标准库中导入路径操作相关的模块
from bs4 import BeautifulSoup  # 导入BeautifulSoup用于HTML解析
from sphinx.util.display import status_iterator  # 导入sphinx工具库中的迭代状态显示函数
from sphinx.util.logging import getLogger  # 导入sphinx工具库中的日志记录功能

logger = getLogger(__name__)  # 获取当前模块的日志记录器


def move_gallery_links(app, exception):
    if exception is not None:
        return

def setup(app):
    # 设置函数用于注册到Sphinx应用程序中
    # 默认优先级为500，用于sphinx-gallery的build-finished事件；
    # 我们需要更大的优先级以便在sphinx-gallery之后运行（数值越大表示越晚）
    app.connect("build-finished", move_gallery_links, priority=900)
```