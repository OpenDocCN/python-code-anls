# `D:\src\scipysrc\scipy\scipy\optimize\_minpackmodule.c`

```
/*
    Multipack project.
    This file is generated by setmodules.py. Do not modify it.
 */

#include "minpack.h"

// 声明一个名为 minpack_error 的静态 PyObject 指针
static PyObject *minpack_error;

#include "__minpack.h"

// 定义一个包含 PyMethodDef 结构体数组的静态变量 minpack_module_methods
static struct PyMethodDef minpack_module_methods[] = {
    {"_hybrd", minpack_hybrd, METH_VARARGS, doc_hybrd},  // 定义 _hybrd 方法的 PyMethodDef
    {"_hybrj", minpack_hybrj, METH_VARARGS, doc_hybrj},  // 定义 _hybrj 方法的 PyMethodDef
    {"_lmdif", minpack_lmdif, METH_VARARGS, doc_lmdif},  // 定义 _lmdif 方法的 PyMethodDef
    {"_lmder", minpack_lmder, METH_VARARGS, doc_lmder},  // 定义 _lmder 方法的 PyMethodDef
    {"_chkder", minpack_chkder, METH_VARARGS, doc_chkder},  // 定义 _chkder 方法的 PyMethodDef
    {NULL, NULL, 0, NULL}  // PyMethodDef 数组的终结符
};

// 定义一个 PyModuleDef 结构体 moduledef
static struct PyModuleDef moduledef = {
    PyModuleDef_HEAD_INIT,  // 初始化 PyModuleDef 结构体
    "_minpack",  // 模块名
    NULL,  // 模块文档字符串
    -1,  // 模块状态，-1 表示使用全局解释器状态
    minpack_module_methods,  // 模块方法列表
    NULL,  // 模块的槽函数（在模块销毁时调用）
    NULL,  // 模块的内存管理器（在模块销毁时调用）
    NULL,  // 模块的清理函数（在模块销毁时调用）
    NULL  // 模块的注释函数（在模块销毁时调用）
};

// 定义模块初始化函数 PyInit__minpack
PyMODINIT_FUNC
PyInit__minpack(void)
{
    PyObject *module, *mdict;

    // 导入 NumPy 的 C API
    import_array();

    // 创建 Python 模块对象
    module = PyModule_Create(&moduledef);
    if (module == NULL) {
        return NULL;  // 如果创建失败，则返回 NULL
    }

    // 获取模块字典
    mdict = PyModule_GetDict(module);
    if (mdict == NULL) {
        return NULL;  // 如果获取失败，则返回 NULL
    }

    // 创建 _minpack.error 异常对象
    minpack_error = PyErr_NewException("_minpack.error", NULL, NULL);
    if (minpack_error == NULL) {
        return NULL;  // 如果创建失败，则返回 NULL
    }

    // 将 _minpack.error 异常对象添加到模块字典中
    if (PyDict_SetItemString(mdict, "error", minpack_error)) {
        return NULL;  // 如果添加失败，则返回 NULL
    }

    // 返回创建的模块对象
    return module;
}
```